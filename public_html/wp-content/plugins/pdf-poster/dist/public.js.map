{"version":3,"file":"public.js","mappings":"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","sources":["webpack://pdf-poster-pro/./src/utils.js","webpack://pdf-poster-pro/./src/public.js"],"sourcesContent":["export function getParams(url = \"\") {\r\n  url = url || location?.href;\r\n  var queryStart = url.indexOf(\"?\") + 1,\r\n    queryEnd = url.indexOf(\"#\") + 1 || url.length + 1,\r\n    query = url.slice(queryStart, queryEnd - 1),\r\n    pairs = query.replace(/\\+/g, \" \").split(\"&\"),\r\n    parms = {},\r\n    i,\r\n    n,\r\n    v,\r\n    nv;\r\n\r\n  if (query === url || query === \"\") return;\r\n\r\n  for (i = 0; i < pairs.length; i++) {\r\n    nv = pairs[i].split(\"=\", 2);\r\n    n = decodeURIComponent(nv[0]);\r\n    v = decodeURIComponent(nv[1]);\r\n\r\n    if (!parms.hasOwnProperty(n)) parms[n] = [];\r\n    parms[n] = nv.length === 2 ? v : null;\r\n  }\r\n  return parms;\r\n}\r\n","// import \"./public/index\";\r\nimport \"./public.scss\";\r\nimport { getParams } from \"./utils\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  PDFP.protect(document.querySelectorAll(\".pdfp_wrapper\"));\r\n\r\n  const quickEmbedder = document.querySelectorAll(\".pdfp_quick_frame_wrapper\");\r\n  quickEmbedder.forEach((item) => {\r\n    const iframe = item.querySelector(\"iframe\");\r\n\r\n    const params = getParams(iframe?.src);\r\n    if (params.file) {\r\n      const file = new URL(params?.file);\r\n      const src = new URL(iframe?.src);\r\n\r\n      if (src?.protocol !== file?.protocol) {\r\n        iframe.src = src.href.replace(file.protocol, src.protocol);\r\n      }\r\n    }\r\n  });\r\n});\r\n\r\ndocument.addEventListener(\"adobe_dc_view_sdk.ready\", function () {\r\n  const documents = document.querySelectorAll(\".pdfp-adobe-viewer\");\r\n  documents.forEach((doc) => {\r\n    let url = doc?.href || doc?.dataset?.href;\r\n    const divId = doc?.dataset?.id || doc?.parentElement?.id;\r\n    const protect = true; //doc?.dataset.protect || false;\r\n    const option = JSON.parse(doc?.dataset?.options, \"{}\");\r\n    const clientId = PDFP.scramble(\"decode\", pdfp.adobeClientKey);\r\n    const parentElement = doc.parentElement;\r\n    window.parentElement = parentElement;\r\n    window.doc = doc;\r\n    if (divId && url) {\r\n      if (protect) {\r\n        url = PDFP.scramble(\"decode\", doc?.href || doc?.dataset?.href);\r\n      }\r\n\r\n      const protectedOption = {\r\n        showPrintPDF: false,\r\n        showDownloadPDF: false,\r\n        showAnnotationTools: false,\r\n        embedMode: option.embedMode,\r\n      };\r\n\r\n      if (doc?.tagName === \"BUTTON\") {\r\n        doc.addEventListener(\"click\", () => {\r\n          renderPDF(protect ? protectedOption : option);\r\n        });\r\n      } else {\r\n        renderPDF(protect ? protectedOption : option);\r\n      }\r\n\r\n      function renderPDF(option) {\r\n        var adobeDCView = new AdobeDC.View({ clientId, divId });\r\n        adobeDCView.previewFile(\r\n          {\r\n            content: { location: { url } },\r\n            metaData: { fileName: \" \" },\r\n          },\r\n          { ...option, enableLinearization: true }\r\n        );\r\n      }\r\n    }\r\n  });\r\n});\r\n\r\nclass PDFP {\r\n  static protect = async (wrapperr) => {\r\n    const getDetectorData = this.getDetectorData(wrapperr);\r\n    let edge = false;\r\n    let objUrl = null;\r\n\r\n    if (!getDetectorData) {\r\n      return false;\r\n    }\r\n    const { wrapper, iframe, options, infos, frame } = getDetectorData;\r\n    const fullscreenBtn = wrapper.querySelector(\".pdfp_fullscreen\");\r\n    const closeBtn = wrapper.querySelector(\".close\");\r\n    const iframeWrapper = wrapper.querySelector(\".iframe_wrapper\");\r\n\r\n    if (fullscreenBtn?.target === \"_self\") {\r\n      fullscreenBtn?.addEventListener(\"click\", (e) => {\r\n        if (!PDFP.isiOSDevice()) {\r\n          e.preventDefault();\r\n          iframeWrapper?.requestFullscreen();\r\n        } else {\r\n          fullscreenBtn.target = \"blank\";\r\n        }\r\n      });\r\n    }\r\n\r\n    closeBtn?.addEventListener(\"click\", (e) => {\r\n      if (document.exitFullscreen) {\r\n        document.exitFullscreen();\r\n      } else if (document.webkitExitFullscreen) {\r\n        /* Safari */\r\n        document.webkitExitFullscreen();\r\n      } else if (document.msExitFullscreen) {\r\n        /* IE11 */\r\n        document.msExitFullscreen();\r\n      }\r\n    });\r\n\r\n    if (infos?.protect) {\r\n      let src = iframe?.dataset?.source || \"\";\r\n      iframe.dataset.source = \"\";\r\n      let source = src.match(/\\?file=(.+)&nobaki/);\r\n      if (!source) {\r\n        edge = true;\r\n        source = src.match(/https:\\/\\/bplugins.com\\/(.+)/);\r\n      }\r\n      if (source) {\r\n        source = this.scramble(\"decode\", source[1]);\r\n        source = source.replace(/https?:/, window.location.protocol);\r\n        if (source.includes(\"dropbox.com\")) {\r\n          objUrl = source;\r\n        } else {\r\n          const result = await fetch(source);\r\n          const blob = await result.blob();\r\n          objUrl = URL.createObjectURL(blob);\r\n        }\r\n        if (!edge) {\r\n          source = src.replace(/\\?file=(.+)&nobaki/, `?file=${objUrl}&nobaki`);\r\n        } else {\r\n          source = objUrl;\r\n        }\r\n        iframe.src = source;\r\n\r\n        function detectDevTool(allow) {\r\n          if (isNaN(+allow)) allow = 100;\r\n          var start = +new Date(); // Validation of built-in Object tamper prevention.\r\n          debugger;\r\n          var end = +new Date(); // Validates too.\r\n          if (isNaN(start) || isNaN(end) || end - start > allow) {\r\n            URL.revokeObjectURL(objUrl);\r\n            alert(\"please close devtool\");\r\n            iframe.src = \"\";\r\n          }\r\n        }\r\n\r\n        if (window.attachEvent) {\r\n          if (\r\n            document.readyState === \"complete\" ||\r\n            document.readyState === \"interactive\"\r\n          ) {\r\n            detectDevTool();\r\n            window.attachEvent(\"onresize\", detectDevTool);\r\n            window.attachEvent(\"onmousemove\", detectDevTool);\r\n            window.attachEvent(\"onfocus\", detectDevTool);\r\n            window.attachEvent(\"onblur\", detectDevTool);\r\n          } else {\r\n            setTimeout(argument.callee, 0);\r\n          }\r\n        } else {\r\n          window.addEventListener(\"load\", detectDevTool);\r\n          window.addEventListener(\"resize\", detectDevTool);\r\n          window.addEventListener(\"mousemove\", detectDevTool);\r\n          window.addEventListener(\"focus\", detectDevTool);\r\n          window.addEventListener(\"blur\", detectDevTool);\r\n        }\r\n      }\r\n\r\n      // disable context menu\r\n\r\n      // disable ctrl, alt, shift, f12\r\n\r\n      if (!infos?.alert) {\r\n        document.oncontextmenu = function (e) {\r\n          e.preventDefault();\r\n        };\r\n        iframe.contentWindow.document.oncontextmenu = function (e) {\r\n          e.preventDefault();\r\n        };\r\n      } else {\r\n        setTimeout(() => {\r\n          document.getElementById(frame).contentWindow.document.oncontextmenu =\r\n            function (e) {\r\n              alert(\"Right Click Disabled\");\r\n              e.preventDefault();\r\n            };\r\n        }, 1000);\r\n        document.oncontextmenu = function (e) {\r\n          alert(\"Right Click Disabled\");\r\n          e.preventDefault();\r\n        };\r\n      }\r\n      // if (wrapper.querySelector(\".pdfp_fullscreen\")) wrapper.querySelector(\".pdfp_fullscreen\").href = source;\r\n      // if (wrapper.querySelector(\".pdfp_download\")) wrapper.querySelector(\".pdfp_download\").href = source;\r\n    } else {\r\n      const params = getParams(iframe?.src);\r\n      const file = new URL(params?.file);\r\n      const src = new URL(iframe?.src);\r\n      const fullscreenBtn = wrapper.querySelector(\".pdfp_fullscreen\");\r\n      if (src?.protocol !== file?.protocol) {\r\n        iframe.src = src.href.replace(file.protocol, src.protocol);\r\n        if (fullscreenBtn) {\r\n          fullscreenBtn.href = src.href.replace(file.protocol, src.protocol);\r\n        }\r\n      }\r\n      iframe?.removeAttribute(\"data-source\");\r\n    }\r\n  };\r\n\r\n  static getDetectorData = (wrapper, options = false, infos = false) => {\r\n    let iframe = null;\r\n    let frame = null;\r\n\r\n    // get the exact wrapper\r\n    if (wrapper === null) {\r\n      return false;\r\n    }\r\n\r\n    if (typeof wrapper[0] !== \"undefined\") {\r\n      wrapper.forEach((item) => {\r\n        PDFP.protect(item);\r\n      });\r\n      return false;\r\n    }\r\n\r\n    if (typeof wrapper.length !== \"undefined\" && wrapper.length === 0) {\r\n      return false;\r\n    }\r\n\r\n    if (wrapper.querySelector(\".pdfp_wrapper\") !== null) {\r\n      wrapper = wrapper.querySelector(\".pdfp_wrapper\");\r\n    }\r\n\r\n    //get data from attribute if it not pass in function\r\n    if (!options && wrapper?.dataset?.options != undefined) {\r\n      options = JSON.parse(wrapper?.dataset?.options || \"{}\");\r\n    }\r\n    if (!infos && wrapper?.dataset?.infos != undefined) {\r\n      infos = JSON.parse(wrapper?.dataset?.infos || \"{}\");\r\n      wrapper.removeAttribute(\"data-infos\");\r\n    }\r\n\r\n    iframe = wrapper.querySelector(\"iframe\");\r\n    frame = wrapper.querySelector(\"iframe\").getAttribute(\"id\");\r\n\r\n    return {\r\n      wrapper,\r\n      iframe,\r\n      options,\r\n      infos,\r\n      frame,\r\n    };\r\n  };\r\n\r\n  static scramble(task = \"encode\", data = \"\") {\r\n    const originalKey = \"abcdefghijklmnopqrstuvwxyz1234567890\";\r\n    const key = \"z1ntg4ihmwj5cr09byx8spl7ak6vo2q3eduf\";\r\n    let resultData = \"\";\r\n    if (task == \"encode\") {\r\n      if (data != \"\") {\r\n        const length = data.length;\r\n        for (let i = 0; i < length; i++) {\r\n          const position = originalKey.indexOf(data[i]);\r\n          if (position !== -1) {\r\n            resultData += key[position];\r\n          } else {\r\n            resultData += data[i];\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    if (task == \"decode\") {\r\n      if (data != \"\") {\r\n        const length = data.length;\r\n        for (let i = 0; i < length; i++) {\r\n          const currentChar = data[i];\r\n          const position = key.indexOf(currentChar);\r\n          if (position !== -1) {\r\n            resultData += originalKey[position];\r\n          } else {\r\n            resultData += currentChar;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return resultData;\r\n  }\r\n\r\n  static isiOSDevice() {\r\n    return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n  }\r\n}\r\n"],"names":["getParams","url","i","n","v","nv","queryStart","location","href","indexOf","queryEnd","length","query","slice","pairs","replace","split","parms","decodeURIComponent","hasOwnProperty","document","addEventListener","PDFP","protect","querySelectorAll","forEach","item","iframe","querySelector","params","src","file","URL","protocol","doc","dataset","divId","id","parentElement","option","JSON","parse","options","clientId","scramble","pdfp","adobeClientKey","window","protectedOption","showPrintPDF","showDownloadPDF","showAnnotationTools","embedMode","renderPDF","AdobeDC","View","previewFile","content","metaData","fileName","enableLinearization","tagName","static","async","getDetectorData","this","wrapperr","edge","objUrl","wrapper","infos","frame","fullscreenBtn","closeBtn","iframeWrapper","target","e","isiOSDevice","preventDefault","requestFullscreen","exitFullscreen","webkitExitFullscreen","msExitFullscreen","source","match","includes","result","fetch","blob","createObjectURL","detectDevTool","allow","isNaN","start","Date","end","revokeObjectURL","alert","attachEvent","readyState","setTimeout","argument","callee","getElementById","contentWindow","oncontextmenu","removeAttribute","undefined","getAttribute","task","data","originalKey","key","resultData","position","currentChar","test","navigator","userAgent","MSStream"],"sourceRoot":""}