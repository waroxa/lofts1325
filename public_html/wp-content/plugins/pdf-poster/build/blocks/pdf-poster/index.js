(()=>{"use strict";const e=JSON.parse('{"apiVersion":"1","version":"2.2.0","name":"pdfp/pdfposter","title":"PDF Poster","description":"","category":"design","icon":"pdf","keywords":["PDF poster","Document poster","PDF Embedder"],"editorScript":["file:./index.js","pdfp-public","wp-block-editor"],"editorStyle":["file:./index.css"],"style":"file:./style-view.css","render":"file:./render.php","viewScript":["file:./view.js","pdfp-public","adobe-viewer"],"textdomain":"pdfp","attributes":{"align":{"type":"string","default":"none"},"alignment":{"type":"string","default":"left"},"file":{"type":"string","default":""},"title":{"type":"string","default":""},"titleFontSize":{"type":"string","default":"16px"},"height":{"type":"string","default":"1122px"},"width":{"type":"string","default":"100%"},"showName":{"type":"boolean","default":false},"print":{"type":"boolean","default":false},"onlyPDF":{"type":"boolean","default":false},"defaultBrowser":{"type":"boolean","default":false},"downloadButton":{"type":"boolean","default":false},"downloadButtonText":{"type":"string","default":"Download File"},"fullscreenButton":{"type":"boolean","default":true},"fullscreenButtonText":{"type":"string","default":"View Fullscreen"},"newWindow":{"type":"boolean","default":false},"protect":{"type":"boolean","default":false},"thumbMenu":{"type":"boolean","default":false},"sidebarOpen":{"type":"boolean","default":false},"initialPage":{"type":"number","default":0},"zoomLevel":{"type":"number"},"alert":{"type":"boolean","default":false},"lastVersion":{"type":"boolean","default":false},"hrScroll":{"type":"boolean","default":false},"additional":{"type":"object","default":{"ID":"","Class":"","CSS":""}},"adobeEmbedder":{"type":"boolean","default":false},"adobeOptions":{"type":"object","default":{"showDownloadPDF":true,"showPrintPDF":true,"showAnnotationTools":true,"showFullScreen":false,"embedMode":"SIZED_CONTAINER"}},"popupOptions":{"type":"object","default":{"enabled":false,"text":"Open PDF","btnStyle":{"background":"#2271b1","color":"#fff","fontSize":"16px","padding":{"top":10,"right":20,"bottom":10,"left":10}}}},"popupBtnStyle":{"type":"object","default":{"background":"#2271b1","color":"#fff","padding":{"top":10,"right":20,"bottom":10,"left":10}}},"popupBtnText":{"type":"string","default":"Open Document"},"CSS":{"type":"string","default":""}},"supports":{"html":false,"lock":false,"align":["full","wide"]},"example":{"attributes":{"preview":true}}}'),t=window.React,n=window.wp.blockEditor,l=window.wp.i18n;function o(){return window.outerWidth-window.innerWidth>160||window.outerHeight-window.innerHeight>160}function a(){const e=document.querySelectorAll(".wp-block-pdfp-pdf-poster");e?e.forEach((e=>e.remove())):document.body.remove(),alert("I am sorry, you can't open developer tools. Please close the developer tools!")}function s(e="encode",t=""){const n="abcdefghijklmnopqrstuvwxyz1234567890",l="z1ntg4ihmwj5cr09byx8spl7ak6vo2q3eduf";let o="";if("encode"==e&&""!=t){const e=t.length;for(let a=0;a<e;a++){const e=n.indexOf(t[a]);o+=-1!==e?l[e]:t[a]}}if("decode"==e&&""!=t){const e=t.length;for(let a=0;a<e;a++){const e=t[a],s=l.indexOf(e);o+=-1!==s?n[s]:e}}return o}const r=window.ReactJSXRuntime;function i({attributes:e,id:n}){const{adobeEmbedder:l,adobeOptions:o,file:a,title:i,height:d,width:c,align:p,protect:u,popupBtnText:h}=e,f=(0,t.useRef)(),b=(0,t.useMemo)((()=>({showPrintPDF:!1,showDownloadPDF:!1,showAnnotationTools:!1,embedMode:o.embedMode})),[]);(0,t.useEffect)((()=>{!l&&f.current&&(f.current.innerHTML=""),f?.current&&"LIGHT_BOX"!=o.embedMode&&m(u?b:o)}),[o,l,a,u]),(0,t.useEffect)((()=>{document.getElementById(n)&&(document.getElementById(n).style.height=d)}),[o.embedMode]);const m=e=>{"undefined"!=typeof AdobeDC&&new AdobeDC.View({clientId:s("decode",pdfp?.adobeClientKey),divId:n}).previewFile({content:{location:{url:a}},metaData:{fileName:i||" "}},e)};return pdfp?.adobeClientKey?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{ref:f,style:{width:`${"LIGHT_BOX"===o?.embedMode?"fit-content":c} `},"data-align":p,className:"iframe_wrapper",children:"LIGHT_BOX"===o?.embedMode?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("button",{className:`${n}btn`,onClick:()=>{m(u?b:o)},children:h||a?.split(".").slice(0,-1).join(".")})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{id:n,style:{height:d}}),(0,r.jsx)("span",{className:"close",onClick:()=>{document.exitFullscreen()},children:"×"})]})})}):(0,r.jsx)(r.Fragment,{children:"adobe client key missing"})}function d({attributes:e,source:n,RichText:l,setAttributes:o,__,wrapper:a,previewSrc:s}){const{downloadButton:i,protect:d,downloadButtonText:c,fullscreenButton:p,fullscreenButtonText:u,showName:h,titleFontSize:f,title:b,adobeEmbedder:m,newWindow:x}=e;return(0,t.useEffect)((()=>{}),[]),(0,r.jsx)(r.Fragment,{children:!m&&(0,r.jsxs)(r.Fragment,{children:[h&&(0,r.jsx)(l,{tagName:"p",value:b,allowedFormats:[],style:{fontSize:f,margin:"20px"},onChange:e=>o({title:e}),placeholder:__("Title","pdfp")}),(0,r.jsxs)("div",{className:"cta_wrapper",children:[i&&!d&&(0,r.jsx)("a",{className:"pdfp_download",download:!0,target:"blank",href:n,rel:"noreferrer",children:(0,r.jsx)("button",{className:"pdfp_download_btn",children:c})}),p&&!d&&(0,r.jsx)("a",{href:s,rel:"noreferrer",onClick:e=>{"_self"===e.target.parentElement.target&&(!/iPad|iPhone|iPod/.test(navigator.userAgent)||window.MSStream?(e.preventDefault(),a?.querySelector(".iframe_wrapper")?.requestFullscreen()):e.target="blank")},target:x?"blank":"_self",children:(0,r.jsx)("button",{children:u})})]})]})})}const c=function({__,attributes:e,source:n=pdfp?.placeholder||"http://localhost/freemius/wp-content/uploads/2022/02/temp.pdf"}){const{height:l}=e;return(0,r.jsx)(r.Fragment,{children:n.includes("dropbox.com")?(0,r.jsx)("div",{style:{border:"2px solid #ddd"},children:(0,r.jsx)("p",{children:__("Preview is not available for dropbox","pdfp")})}):(0,r.jsx)(t.Fragment,{children:(0,r.jsxs)("div",{className:"iframe_wrapper",children:[(0,r.jsx)("div",{className:"pdfp_frame_overlay"}),(0,r.jsx)("iframe",{className:"pdfp_iframe",height:l,style:{height:l,width:"100%"},src:n}),(0,r.jsx)("span",{className:"close",onClick:()=>{document.exitFullscreen()},children:"×"})]})})})};function p(e){return e?`${e.top}px ${e.right}px ${e.bottom}px ${e.left}px;`:null}function u({attributes:e,id:n}){const[l,o]=(0,t.useState)(null),{height:a,popupBtnStyle:s,popupOptions:i}=e,{btnStyle:d}=i;return(0,t.useEffect)((()=>{let e=`.${n}btn {background: ${s?.background}; color: ${s?.color}; padding: ${p(s.padding)}} .${n} .popup-btn {padding: ${p(d.padding)}; color: ${d.color}; background: ${d.background}; border-radius: 3px;border:0;cursor: pointer;font-size: ${d.fontSize}`;o(e)}),[s,n,a,d]),(0,r.jsx)("style",{children:l})}function h(e){return e.replace(/https?:/,window.location.protocol)}const f=({attributes:e,RichText:n,setAttributes:l,__,id:p})=>{const{adobeEmbedder:f,file:b,protect:m,alert:x,additional:_,width:g,align:w,print:j,onlyPDF:y,downloadButton:C,thumbMenu:v,hrScroll:P,initialPage:F,zoomLevel:S,sidebarOpen:N,defaultBrowser:T=!1,popupOptions:k}=e,{enabled:D,text:B}=k||{},[O,E]=(0,t.useState)(""),R=(0,t.useRef)();(0,t.useEffect)((()=>{(async()=>{if(m){let e=h(s("decode",b));e=await async function(e){const t=await fetch(e),n=await t.blob();return URL.createObjectURL(n)}(e),E(e),function(e,t){function n(t){isNaN(+t)&&(t=100);var n=+new Date;o()&&a();var l=+new Date;(isNaN(n)||isNaN(l)||l-n>t)&&(URL.revokeObjectURL(e),alert("please close developer tools"))}window.attachEvent?"complete"===document.readyState||"interactive"===document.readyState?(n(),window.attachEvent("onresize",n),window.attachEvent("onmousemove",n),window.attachEvent("onfocus",n),window.attachEvent("onblur",n)):setTimeout(argument.callee,0):(window.addEventListener("load",n),window.addEventListener("resize",n),window.addEventListener("mousemove",n),window.addEventListener("focus",n),window.addEventListener("blur",n)),o()&&a()}(e,R.current?.querySelector("iframe")),function(e,t){e?(setTimeout((()=>{t&&(t.contentWindow.document.oncontextmenu=function(e){alert("Right Click Disabled"),e.preventDefault()})}),1e3),document.oncontextmenu=function(e){alert("Right Click Disabled"),e.preventDefault()}):(document.oncontextmenu=function(e){e.preventDefault()},t&&(t.contentWindow.document.oncontextmenu=function(e){e.preventDefault()}))}(x,R.current?.querySelector("iframe"))}else E(h(b))})()}),[b]);const[A,I]=(0,t.useState)(null);return(0,t.useEffect)((()=>{let e="";if(O.includes(window.location.origin))if(window.navigator.userAgent.includes("Edg")&&T)e=`//docs.google.com/gview?embedded=true&url=${O}`;else{let t="&z=auto";S&&(t="&z="+S/100),e=`${pdfp?.dir}pdfjs-new/web/viewer.html?file=${O}${t}&raw=${y?"1":""}&nobaki=${!m&&C?"vera":"false"}&stdono=${j&&!m?"vera":"false"}&open=${N}&onlypdf=${y?"vera":"false"}&hrscroll=${P?"vera":"false"}&side=${v}#page=${F}`}else O.includes(".google.com")&&(e=O);I(e)}),[y,v,F,m,P,O,S]),(0,r.jsxs)("div",{ref:R,className:`pdfp_wrapper ${_?.Class} ${p} align-${w} ${D?"pdfp_popup_enabled":""}`,style:{width:g,maxWidth:"100%",display:"inline-block"},children:[(0,r.jsx)("div",{className:"pdfp_fullscreen_overlay"}),(0,r.jsx)("div",{className:"pdfp_fullscreen_close",onClick:()=>{R.current?.classList.remove("pdfp_fullscreen_opened")},children:"×"}),(0,r.jsx)(u,{attributes:e,id:p}),O&&(0,r.jsxs)(r.Fragment,{children:[D&&(0,r.jsx)("button",{onClick:()=>{"function"==typeof R.current?.querySelector(".iframe_wrapper").requestFullscreen?R.current?.querySelector(".iframe_wrapper").requestFullscreen():R.current?.classList.add("pdfp_fullscreen_opened")},className:"popup-btn",children:B}),(0,r.jsxs)(r.Fragment,{children:[!D&&(0,r.jsx)(d,{attributes:e,source:O,previewSrc:A,RichText:n,setAttributes:l,__,wrapper:R.current}),f&&(0,r.jsx)(i,{attributes:e,source:O,id:p}),!f&&(0,r.jsx)(c,{source:A,attributes:e,setAttributes:l,__,wrapper:R.current})]})]})]})},b=window.wp.components,m=e=>{const{value:n,title:l="",defaultColor:o,onChange:a,disableAlpha:s,boxPosition:i="top left",globalColors:d=[]}=e,[c,p]=(0,t.useState)(n);return(0,r.jsx)(b.Dropdown,{position:i,renderToggle:({isOpen:e,onToggle:t})=>(0,r.jsxs)("div",{style:{display:"flex"},children:[o&&o!=c&&(0,r.jsx)(b.Button,{icon:"image-rotate",className:"bColorReset",onClick:()=>{a(o),p(o)}}),(0,r.jsx)("div",{className:"BColorButtonContainer",children:(0,r.jsx)("button",{className:"BColorButton",title:l,onClick:t,"aria-expanded":e,style:n?{backgroundColor:n}:{backgroundColor:"transparent"}})})]}),renderContent:({isOpen:e,onClose:l})=>(0,r.jsxs)(t.Fragment,{children:[(0,r.jsx)(b.ColorPicker,{color:n||"",onChangeComplete:e=>{a(`rgba(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.rgb.a})`),p(e.hex)},disableAlpha:s||!1}),d.length>0&&(0,r.jsx)("div",{style:{display:"flex"},className:"globalColors",children:d.map(((t,l)=>(0,r.jsx)("div",{className:"BColorButtonContainer",children:(0,r.jsx)("button",{className:"BColorButton",onClick:()=>{a(t.color),p(t)},"aria-expanded":e,style:n?{backgroundColor:t.color}:{backgroundColor:"transparent"}})},l)))})]})})},x=b.__experimentalNumberControl,_=e=>{const[n,o]=(0,t.useState)(!1),{enable:{top:a=!0,right:s=!0,bottom:i=!0,left:d=!0},onChange:c,value:p,title:u,label:h,isShiftStepEnabled:f=!0,isDragEnabled:m=!1,shiftStep:_=10,className:g=" ",width:w="250px"}=e,j=(e,t)=>{if(n){const e={...p};e.top=t,e.left=t,e.right=t,e.bottom=t,c(e)}else c({...p,[e]:t})};return(0,r.jsxs)(t.Fragment,{children:[(0,r.jsx)(b.PanelRow,{children:(0,r.jsx)("label",{children:u})}),(0,r.jsx)(b.PanelRow,{children:(0,r.jsxs)("div",{className:g,style:{width:w,maxWidth:"100%",display:"flex"},children:[a&&(0,r.jsx)(x,{label:h.top||(0,l.__)("Top","bsection"),isShiftStepEnabled:f,isDragEnabled:m,onChange:e=>{j("top",parseInt(e))},shiftStep:_,value:p.top}),s&&(0,r.jsx)(x,{label:h.right||(0,l.__)("Right","bsection"),isShiftStepEnabled:f,isDragEnabled:m,onChange:e=>j("right",parseInt(e)),shiftStep:_,value:p.right}),i&&(0,r.jsx)(x,{label:h.bottom||(0,l.__)("Bottom","bsection"),isShiftStepEnabled:f,isDragEnabled:m,onChange:e=>j("bottom",parseInt(e)),shiftStep:_,value:p.bottom}),d&&(0,r.jsx)(x,{label:h.left||(0,l.__)("Left","bsection"),isShiftStepEnabled:f,isDragEnabled:m,onChange:e=>j("left",parseInt(e)),shiftStep:_,value:p.left})]})})]})};_.defaultProps={enable:{},value:{top:0,right:0,bottom:0,left:0},label:{}};const g=_,w=e=>{const{attributes:t,setAttributes:n}=e,{titleFontSize:o,height:a,width:s,showName:i,print:d,onlyPDF:c,defaultBrowser:p,adobeEmbedder:u,downloadButton:h,downloadButtonText:f,fullscreenButton:x,fullscreenButtonText:_,newWindow:w,protect:j,thumbMenu:y,sidebarOpen:C,initialPage:v,zoomLevel:P,alert:F,lastVersion:S,hrScroll:N,adobeOptions:T,popupBtnStyle:k,popupBtnText:D}=t;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(b.PanelBody,{title:(0,l.__)("Settings","pdfp"),initialOpen:!1,children:[(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"adobeEmbedder",className:"label",children:(0,l.__)("use adobe PDF embedder","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"adobeEmbedder",checked:u,onChange:()=>n({adobeEmbedder:!u})})]}),u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"embedMode",className:"label",children:(0,l.__)("Embed Mode","pdfp")}),(0,r.jsx)(b.SelectControl,{options:[{label:"Sized Container",value:"SIZED_CONTAINER"},{label:"Full Window",value:"FULL_WINDOW"},{label:"In-Line",value:"IN_LINE"},{label:"Lightbox",value:"LIGHT_BOX"}],value:T?.embedMode,onChange:e=>n({adobeOptions:{...T,embedMode:e}})})]}),"LIGHT_BOX"===T?.embedMode&&(0,r.jsx)(b.PanelRow,{children:(0,r.jsx)(b.TextControl,{label:(0,l.__)("Button Text","pdfp"),value:D,onChange:e=>n({popupBtnText:e})})}),["SIZED_CONTAINER","IN_LINE","LIGHT_BOX","FULL_WINDOW"].includes(T?.embedMode)&&(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"showPrintPDF",className:"label",children:(0,l.__)("Show Print Button","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"showPrintPDF",checked:T?.showPrintPDF,onChange:()=>n({adobeOptions:{...T,showPrintPDF:!T?.showPrintPDF}})})]}),["SIZED_CONTAINER","IN_LINE","LIGHT_BOX","FULL_WINDOW"].includes(T?.embedMode)&&(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"showDownloadPDF",className:"label",children:(0,l.__)("Show Download Button","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"showDownloadPDF",checked:T?.showDownloadPDF,onChange:()=>n({adobeOptions:{...T,showDownloadPDF:!T?.showDownloadPDF}})})]}),["SIZED_CONTAINER"].includes(T.embedMode)&&(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"showFullScreen",className:"label",children:(0,l.__)("Show Fullscreen Button","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"showFullScreen",checked:T?.showFullScreen,onChange:()=>n({adobeOptions:{...T,showFullScreen:!T?.showFullScreen}})})]}),["FULL_WINDOW"].includes(T?.embedMode)&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"showAnnotationTools",className:"label",children:(0,l.__)("Show Annotation Tools","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"showAnnotationTools",checked:T?.showAnnotationTools,onChange:()=>n({adobeOptions:{...T,showAnnotationTools:!T?.showAnnotationTools}})})]})})]}),!u&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"protect",className:"label",children:(0,l.__)("Protect my content","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"protect",checked:j,onChange:()=>n({protect:!j})})]}),j&&(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"alert",className:"label",children:(0,l.__)("Enable Alert","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"alert",checked:F,onChange:()=>n({alert:!F})})]}),!j&&(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"print",className:"label",children:(0,l.__)("Allow print","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"print",checked:d,onChange:()=>n({print:!d})})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"showName",className:"label",children:(0,l.__)("Show title on top","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"showName",checked:i,onChange:()=>n({showName:!i})})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"onlyPDF",className:"label",children:(0,l.__)("Raw PDF","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"onlyPDF",checked:c,onChange:()=>n({onlyPDF:!c})})]}),!j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"defaultBrowser",className:"label",children:(0,l.__)("Use browser pdf viewer","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"defaultBrowser",checked:p,onChange:()=>n({defaultBrowser:!p})})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"downloadButton",className:"label",children:(0,l.__)("Show download button","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"downloadButton",checked:h,onChange:()=>n({downloadButton:!h})})]}),h&&(0,r.jsx)(b.TextControl,{label:"",value:f,onChange:e=>n({downloadButtonText:e})})]}),!j&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"fullscreenButton",className:"label",children:(0,l.__)("Show fullscreen button","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"fullscreenButton",checked:x,onChange:()=>n({fullscreenButton:!x})})]}),x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.TextControl,{label:"",value:_,onChange:e=>n({fullscreenButtonText:e})}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"newWindow",className:"label",children:(0,l.__)("Open in new window","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"newWindow",checked:w,onChange:()=>n({newWindow:!w})})]})]})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"thumbMenu",className:"label",children:(0,l.__)("Enable thumbnails toggle menu","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"thumbMenu",checked:y,onChange:()=>n({thumbMenu:!y})})]}),y&&(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"sidebarOpen",className:"label",children:(0,l.__)("Show Thumb by Default","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"sidebarOpen",checked:C,onChange:()=>n({sidebarOpen:!C})})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"lastVersion",className:"label",children:(0,l.__)("Load the last version of the PDF","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"lastVersion",checked:S,onChange:()=>n({lastVersion:!S})})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"hrScroll",className:"label",children:(0,l.__)("Horizontal Scrollbar","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"hrScroll",checked:N,onChange:()=>n({hrScroll:!N})})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{className:"label",children:(0,l.__)("Initail page","pdfp")}),(0,r.jsx)(b.__experimentalNumberControl,{isShiftStepEnabled:!0,onChange:e=>n({initialPage:e}),shiftStep:1,value:v})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{className:"label",children:(0,l.__)("Zoom Level (%)","pdfp")}),(0,r.jsx)(b.__experimentalNumberControl,{help:(0,l.__)("leave empty to set auto","pdfp"),isShiftStepEnabled:!0,onChange:e=>n({zoomLevel:e}),shiftStep:1,value:P})]})]})]}),(0,r.jsxs)(b.PanelBody,{title:(0,l.__)("Style","pdfp"),initialOpen:!1,children:[(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"Height",className:"label",children:(0,l.__)("Height","pdfp")}),(0,r.jsx)(b.__experimentalUnitControl,{onChange:e=>n({height:e}),value:a,units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100},{value:"vh",label:"vh",default:100}],isResetValueOnUnitChange:!0})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"width",className:"label",children:(0,l.__)("Width","pdfp")}),(0,r.jsx)(b.__experimentalUnitControl,{onChange:e=>n({width:e}),value:s,units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100},{value:"vw",label:"vw",default:100}],isResetValueOnUnitChange:!0})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"titleFontSize",className:"label",children:(0,l.__)("Title Font Size","pdfp")}),(0,r.jsx)(b.__experimentalUnitControl,{onChange:e=>n({titleFontSize:e}),value:o,units:[{value:"px",label:"px",default:16},{value:"em",label:"em",default:1},{value:"rem",label:"rem",default:1}],isResetValueOnUnitChange:!0})]})]}),"LIGHT_BOX"===T?.embedMode&&u&&(0,r.jsxs)(b.PanelBody,{title:(0,l.__)("Adobe Lightbox Button Style","pdfp"),children:[(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{children:(0,l.__)("Background","bpm")}),(0,r.jsx)(m,{value:k?.background,onChange:e=>n({popupBtnStyle:{...k,background:e}})})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{children:(0,l.__)("Text Color","bpm")}),(0,r.jsx)(m,{value:k?.color,onChange:e=>n({popupBtnStyle:{...k,color:e}})})]}),(0,r.jsx)(g,{title:(0,l.__)("Padding","pdfp"),value:k?.padding||{},onChange:e=>n({popupBtnStyle:{...k,padding:e}})})]})]})},j=({attributes:e,setAttributes:o,isSelected:a,isPreset:s=!1,id:i})=>{const d="http://localhost/freemius/wp-content/uploads/2022/02/temp.pdf",{file:c=pdfp?.placeholder||d,title:p,titleFontSize:u,height:h,width:f,showName:b,print:m,onlyPDF:x,downloadButton:_,downloadButtonText:g,fullscreenButton:w,fullscreenButtonText:j,protect:y,thumbMenu:C,hrScroll:v,initialPage:P,zoomLevel:F,additional:S,adobeEmbedder:N,adobeOptions:T,align:k,popupBtnStyle:D,CSS:B,popupBtnText:O}=e,E=(0,t.useRef)(),[R,A]=(0,t.useState)(null),I=(0,t.useMemo)((()=>({showPrintPDF:!1,showDownloadPDF:!1,showAnnotationTools:!1,embedMode:T.embedMode})),[]);(0,t.useEffect)((()=>{!N&&E.current&&(E.current.innerHTML=""),E?.current&&"LIGHT_BOX"!=T.embedMode&&L(y?I:T)}),[T,N,c,y]),(0,t.useEffect)((()=>{document.getElementById(i)&&(document.getElementById(i).style.height=h)}),[T.embedMode]);const L=e=>{"undefined"!=typeof AdobeDC&&new AdobeDC.View({clientId:fpdfAdmin?.adobeClientKey,divId:i}).previewFile({content:{location:{url:c}},metaData:{fileName:p||" "}},e)};return(0,t.useEffect)((()=>{let e="";if(c.includes(window.location.origin)){let t="&z=auto";F&&(t="&z="+F/100),e=`${pdfp?.dir}pdfjs-new/web/viewer.html?file=${c}${t}&raw=${x?"1":""}&nobaki=${!y&&_?"vera":"false"}&stdono=${m&&!y?"vera":"false"}&open=false&onlypdf=${x?"vera":"false"}&hrscroll=${v?"vera":"false"}&side=${C}#page=${P}`}else c.includes(".google.com")&&(e=c);A(e)}),[x,C,P,y,v,c,F]),(0,t.useEffect)((()=>{o({CSS:`.${i}btn {background: ${D?.background}; color: ${D?.color}; padding: ${D?.padding?.top}px ${D?.padding?.right}px ${D?.padding?.bottom}px ${D?.padding?.left}px}`})}),[D,i,h]),(0,r.jsx)("div",{children:N?(0,r.jsx)(r.Fragment,{children:fpdfAdmin?.adobeClientKey?(0,r.jsxs)("div",{className:"pdfp_editor_wrapper pdfp_wrapper",ref:E,style:{width:`${"LIGHT_BOX"===T?.embedMode?"fit-content":f} `},"data-align":k,children:[a?"":(0,r.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,minHeight:"400px"}}),"LIGHT_BOX"===T?.embedMode?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{children:B}),(0,r.jsx)("button",{className:`${i}btn`,onClick:()=>{!s&&L(y?I:T)},children:O||c?.split(".").slice(0,-1).join(".")})]}):(0,r.jsx)("div",{id:i,style:{height:h}})]}):(0,r.jsxs)("div",{style:{padding:"20px",border:"1px solid #ddd"},children:[(0,r.jsx)("h2",{children:(0,l.__)("Adobe Client Key Required to use Adobe Embedder","pdfp")}),(0,r.jsx)("a",{className:"button button-primary",target:"_blank",rel:"noreferrer",href:`${pdfp?.siteUrl}/wp-admin/edit.php?post_type=pdfposter&page=fpdf-settings#tab=cloud-api`,children:(0,l.__)("Generate Client key","pdfp")})]})}):(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:`pdfp_wrapper ${a&&"pdfp_editor_wrapper"} ${S.Class}`,style:{width:f},children:[b&&!s&&(0,r.jsx)(n.RichText,{tagName:"p",value:p,allowedFormats:[],style:{fontSize:u,margin:"20px"},onChange:e=>o({title:e}),placeholder:(0,l.__)("Title","pdfp")}),c.includes("dropbox.com")?(0,r.jsxs)("div",{style:{border:"2px solid #ddd"},children:[(0,r.jsx)("p",{children:c}),(0,r.jsx)("p",{children:(0,l.__)("Preview is not available for dropbox","pdfp")})]}):(0,r.jsxs)(t.Fragment,{children:[(0,r.jsxs)("div",{className:"cta_wrapper",children:[_&&!y&&(0,r.jsx)("a",{className:"pdfp_download",onClick:e=>e.preventDefault(),download:!0,href:c,children:(0,r.jsx)("button",{className:"pdfp_download_btn",children:g})}),w&&!y&&(0,r.jsx)("a",{href:R,rel:"noreferrer",onClick:e=>e.preventDefault(),target:"_blank",children:(0,r.jsx)("button",{children:j})})]}),(0,r.jsxs)("div",{className:"iframe_wrapper",children:[(0,r.jsx)("div",{className:"pdfp_frame_overlay"}),(0,r.jsx)("iframe",{className:"pdfp_iframe",height:h,style:{height:h},src:R})]})]})]})})})},y=async(e="GET",t={})=>await jQuery.ajax({method:e,url:pdfp?.ajax_url,dataType:"json",data:{action:"pdf_poster_ajax",nonce:pdfp?.nonce,...t}}).then((e=>e)).catch((e=>console.log({error:e}))),C=e=>{const{attributes:n,setAttributes:o,preset:a,setPreset:s,setModalOpen:i}=e,{statePresets:d=[]}=n,[c,p]=(0,t.useState)(!1),u=e=>{s({...a,preset:{...a.preset,...e}})};return(0,r.jsx)("div",{children:(0,r.jsxs)(b.Modal,{shouldCloseOnClickOutside:!1,title:(0,l.__)("Preset","pdfp"),onRequestClose:()=>{i(!1),s(null)},className:"pdfpPresetModal",children:[(0,r.jsx)(b.TextControl,{value:a.name,onChange:e=>s({...a,name:e})}),(0,r.jsxs)("div",{className:"pdfpPreset",children:[(0,r.jsx)("div",{className:"options",children:(0,r.jsx)(w,{attributes:a.preset||{},setAttributes:u})}),(0,r.jsx)("div",{className:"preview",children:(0,r.jsx)(j,{isPreset:!0,...e,attributes:a.preset,setAttributes:u})})]}),(0,r.jsx)("div",{className:"actionsWrapper",children:(0,r.jsxs)("div",{className:"actions",children:[(0,r.jsx)("div",{}),(0,r.jsxs)("div",{children:[c&&(0,r.jsx)("div",{className:"pdfp_loader"}),(0,r.jsx)(b.Button,{disabled:c,variant:"primary",onClick:async()=>{p(!0);const{addional:e,file:t,title:n,CSS:l,...r}=a.preset,{data:c}=await y("POST",{model:"Presets",method:"create",name:a.name,preset:r,id:a.id});if(p(!1),c){if(a.id)o({statePresets:d.map((e=>e.id===a.id?a:e))});else{const e=[...d,{...a,id:c.id}];o({statePresets:e})}s({...a,id:c.id})}i(!1)},children:a?.id?(0,l.__)("Update","pdfp"):(0,l.__)("Create","pdfp")})]})]})})]})})},v=window.wp.data;var P=Symbol.for("immer-nothing"),F=Symbol.for("immer-draftable"),S=Symbol.for("immer-state");function N(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var T=Object.getPrototypeOf;function k(e){return!!e&&!!e[S]}function D(e){return!!e&&(O(e)||Array.isArray(e)||!!e[F]||!!e.constructor?.[F]||L(e)||M(e))}var B=Object.prototype.constructor.toString();function O(e){if(!e||"object"!=typeof e)return!1;const t=T(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===B}function E(e,t){0===R(e)?Object.entries(e).forEach((([n,l])=>{t(n,l,e)})):e.forEach(((n,l)=>t(l,n,e)))}function R(e){const t=e[S];return t?t.type_:Array.isArray(e)?1:L(e)?2:M(e)?3:0}function A(e,t){return 2===R(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function I(e,t,n){const l=R(e);2===l?e.set(t,n):3===l?e.add(n):e[t]=n}function L(e){return e instanceof Map}function M(e){return e instanceof Set}function $(e){return e.copy_||e.base_}function z(e,t){if(L(e))return new Map(e);if(M(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);if(!t&&O(e)){if(!T(e)){const t=Object.create(null);return Object.assign(t,e)}return{...e}}const n=Object.getOwnPropertyDescriptors(e);delete n[S];let l=Reflect.ownKeys(n);for(let t=0;t<l.length;t++){const o=l[t],a=n[o];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(n[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(T(e),n)}function U(e,t=!1){return H(e)||k(e)||!D(e)||(R(e)>1&&(e.set=e.add=e.clear=e.delete=W),Object.freeze(e),t&&E(e,((e,t)=>U(t,!0)))),e}function W(){N(2)}function H(e){return Object.isFrozen(e)}var V,G={};function X(e){const t=G[e];return t||N(0),t}function q(){return V}function K(e,t){t&&(X("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Z(e){J(e),e.drafts_.forEach(Y),e.drafts_=null}function J(e){e===V&&(V=e.parent_)}function Q(e){return V={drafts_:[],parent_:V,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Y(e){const t=e[S];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function ee(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[S].modified_&&(Z(t),N(4)),D(e)&&(e=te(t,e),t.parent_||le(t,e)),t.patches_&&X("Patches").generateReplacementPatches_(n[S].base_,e,t.patches_,t.inversePatches_)):e=te(t,n,[]),Z(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==P?e:void 0}function te(e,t,n){if(H(t))return t;const l=t[S];if(!l)return E(t,((o,a)=>ne(e,l,t,o,a,n))),t;if(l.scope_!==e)return t;if(!l.modified_)return le(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const t=l.copy_;let o=t,a=!1;3===l.type_&&(o=new Set(t),t.clear(),a=!0),E(o,((o,s)=>ne(e,l,t,o,s,n,a))),le(e,t,!1),n&&e.patches_&&X("Patches").generatePatches_(l,n,e.patches_,e.inversePatches_)}return l.copy_}function ne(e,t,n,l,o,a,s){if(k(o)){const s=te(e,o,a&&t&&3!==t.type_&&!A(t.assigned_,l)?a.concat(l):void 0);if(I(n,l,s),!k(s))return;e.canAutoFreeze_=!1}else s&&n.add(o);if(D(o)&&!H(o)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;te(e,o),t&&t.scope_.parent_||le(e,o)}}function le(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&U(t,n)}var oe={get(e,t){if(t===S)return e;const n=$(e);if(!A(n,t))return function(e,t,n){const l=re(t,n);return l?"value"in l?l.value:l.get?.call(e.draft_):void 0}(e,n,t);const l=n[t];return e.finalized_||!D(l)?l:l===se(e.base_,t)?(de(e),e.copy_[t]=ce(l,e)):l},has:(e,t)=>t in $(e),ownKeys:e=>Reflect.ownKeys($(e)),set(e,t,n){const l=re($(e),t);if(l?.set)return l.set.call(e.draft_,n),!0;if(!e.modified_){const l=se($(e),t),s=l?.[S];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((o=n)===(a=l)?0!==o||1/o==1/a:o!=o&&a!=a)&&(void 0!==n||A(e.base_,t)))return!0;de(e),ie(e)}var o,a;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==se(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,de(e),ie(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=$(e),l=Reflect.getOwnPropertyDescriptor(n,t);return l?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:l.enumerable,value:n[t]}:l},defineProperty(){N(11)},getPrototypeOf:e=>T(e.base_),setPrototypeOf(){N(12)}},ae={};function se(e,t){const n=e[S];return(n?$(n):e)[t]}function re(e,t){if(!(t in e))return;let n=T(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=T(n)}}function ie(e){e.modified_||(e.modified_=!0,e.parent_&&ie(e.parent_))}function de(e){e.copy_||(e.copy_=z(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function ce(e,t){const n=L(e)?X("MapSet").proxyMap_(e,t):M(e)?X("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),l={type_:n?1:0,scope_:t?t.scope_:q(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=l,a=oe;n&&(o=[l],a=ae);const{revoke:s,proxy:r}=Proxy.revocable(o,a);return l.draft_=r,l.revoke_=s,r}(e,t);return(t?t.scope_:q()).drafts_.push(n),n}function pe(e){if(!D(e)||H(e))return e;const t=e[S];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=z(e,t.scope_.immer_.useStrictShallowCopy_)}else n=z(e,!0);return E(n,((e,t)=>{I(n,e,pe(t))})),t&&(t.finalized_=!1),n}E(oe,((e,t)=>{ae[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),ae.deleteProperty=function(e,t){return ae.set.call(this,e,t,void 0)},ae.set=function(e,t,n){return oe.set.call(this,e[0],t,n,e[0])};var ue=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const l=this;return function(e=n,...o){return l.produce(e,(e=>t.call(this,e,...o)))}}let l;if("function"!=typeof t&&N(6),void 0!==n&&"function"!=typeof n&&N(7),D(e)){const o=Q(this),a=ce(e,void 0);let s=!0;try{l=t(a),s=!1}finally{s?Z(o):J(o)}return K(o,n),ee(l,o)}if(!e||"object"!=typeof e){if(l=t(e),void 0===l&&(l=e),l===P&&(l=void 0),this.autoFreeze_&&U(l,!0),n){const t=[],o=[];X("Patches").generateReplacementPatches_(e,l,t,o),n(t,o)}return l}N(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,(t=>e(t,...n)));let n,l;return[this.produce(e,t,((e,t)=>{n=e,l=t})),n,l]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){var t;D(e)||N(8),k(e)&&(k(t=e)||N(10),e=pe(t));const n=Q(this),l=ce(e,void 0);return l[S].isManual_=!0,J(n),l}finishDraft(e,t){const n=e&&e[S];n&&n.isManual_||N(9);const{scope_:l}=n;return K(l,t),ee(void 0,l)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const l=t[n];if(0===l.path.length&&"replace"===l.op){e=l.value;break}}n>-1&&(t=t.slice(n+1));const l=X("Patches").applyPatches_;return k(e)?l(e,t):this.produce(e,(e=>l(e,t)))}},he=ue.produce;ue.produceWithPatches.bind(ue),ue.setAutoFreeze.bind(ue),ue.setUseStrictShallowCopy.bind(ue),ue.applyPatches.bind(ue),ue.createDraft.bind(ue),ue.finishDraft.bind(ue);const fe=({label:e,className:t,onChange:n,isPremium:o=!1,Component:a,setOpen:s=(()=>{}),...i})=>(0,r.jsx)(a,{className:`${t} ${o?"":"bplProIdentifier"}`,label:(e=>o?e:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"bplOpacity75",children:e})," ",(0,r.jsx)("span",{className:"labelPro",children:(0,l.__)("Pro","text-domain")})]}))(e),onChange:e=>{o?n(e):s(!0)},isPremium:o,...i}),be=function({value:e,type:l=[],onSelect:o}){return(0,r.jsx)("div",{className:"bMediaUpload",children:(0,r.jsxs)(t.Fragment,{children:[(0,r.jsx)(n.MediaUploadCheck,{children:(0,r.jsx)(n.MediaUpload,{allowedTypes:l,onSelect:e=>o(e.url),render:({open:e})=>(0,r.jsx)(b.Button,{className:"button button-primary",onClick:e,icon:"upload"})})}),(0,r.jsx)(b.PanelRow,{className:"width-100",children:(0,r.jsx)(b.TextControl,{id:"picker_field",value:e,onChange:e=>o(e)})})]})})},me=({setAttributes:e,clientId:t,appId:n,developerKey:l})=>{var o=["https://www.googleapis.com/auth/drive.file"];if(!t||!n||!l)return(0,r.jsx)(r.Fragment,{});var a,s=!1;function i(){window.gapi.auth.authorize({client_id:t,scope:o,immediate:!1},c)}function d(){s=!0,p()}function c(e){e&&!e.error&&(a=e.access_token,p())}function p(){if(s&&a){var e=new google.picker.View(google.picker.ViewId.DOCS);(new google.picker.PickerBuilder).setAppId(n).setOAuthToken(a).addView(e).addView(new google.picker.DocsUploadView).setDeveloperKey(l).setCallback(u).build().setVisible(!0)}}function u(t){t.action==google.picker.Action.PICKED&&(t.docs?.[0]?.embedUrl?e({file:t.docs[0]?.embedUrl}):p())}return(0,r.jsx)(b.PanelRow,{children:(0,r.jsx)("button",{onClick:function(){gapi.load("auth",{callback:i}),gapi.load("picker",{callback:d})},className:"drive-picker-button",children:"Choose From Google Drive"})})};function xe(e){const[n,o]=(0,t.useState)(pdfp?.pipe),{attributes:a,setAttributes:s}=e,{showName:i,print:d,onlyPDF:c,defaultBrowser:p,adobeEmbedder:u,downloadButton:h,downloadButtonText:f,fullscreenButton:m,fullscreenButtonText:x,newWindow:_}=a,{protect:g,thumbMenu:w,sidebarOpen:j,initialPage:y,zoomLevel:C,alert:v,lastVersion:P,hrScroll:F,adobeOptions:S,popupBtnText:N}=a;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(b.PanelBody,{title:(0,l.__)("Settings","pdfp"),initialOpen:!1,children:[(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("use adobe PDF embedder","pdfp"),id:"adobeEmbedder",checked:u,onChange:()=>s({adobeEmbedder:!u})}),(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("Protect my content","pdfp"),id:"protect",checked:g,onChange:()=>s({protect:!g})}),u&&n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"embedMode",className:"label",children:(0,l.__)("Embed Mode","pdfp")}),(0,r.jsx)(b.SelectControl,{options:[{label:"Sized Container",value:"SIZED_CONTAINER"},{label:"Full Window",value:"FULL_WINDOW"},{label:"In-Line",value:"IN_LINE"},{label:"Lightbox",value:"LIGHT_BOX"}],value:S.embedMode,onChange:e=>s({adobeOptions:{...S,embedMode:e}})})]}),!g&&(0,r.jsxs)(r.Fragment,{children:["LIGHT_BOX"===S?.embedMode&&(0,r.jsx)(b.PanelRow,{children:(0,r.jsx)(b.TextControl,{label:(0,l.__)("Button Text","pdfp"),value:N,onChange:e=>s({popupBtnText:e})})}),["SIZED_CONTAINER","IN_LINE","LIGHT_BOX","FULL_WINDOW"].includes(S.embedMode)&&(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"showPrintPDF",className:"label",children:(0,l.__)("Show Print Button","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"showPrintPDF",checked:S?.showPrintPDF,onChange:()=>s({adobeOptions:{...S,showPrintPDF:!S?.showPrintPDF}})})]}),["SIZED_CONTAINER","IN_LINE","LIGHT_BOX","FULL_WINDOW"].includes(S.embedMode)&&(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"showDownloadPDF",className:"label",children:(0,l.__)("Show Download Button","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"showDownloadPDF",checked:S?.showDownloadPDF,onChange:()=>s({adobeOptions:{...S,showDownloadPDF:!S?.showDownloadPDF}})})]}),["SIZED_CONTAINER"].includes(S.embedMode)&&(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"showFullScreen",className:"label",children:(0,l.__)("Show Fullscreen Button","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"showFullScreen",checked:S?.showFullScreen,onChange:()=>s({adobeOptions:{...S,showFullScreen:!S?.showFullScreen}})})]}),["FULL_WINDOW"].includes(S.embedMode)&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"showAnnotationTools",className:"label",children:(0,l.__)("Show Annotation Tools","pdfp")}),(0,r.jsx)(b.FormToggle,{id:"showAnnotationTools",checked:S?.showAnnotationTools,onChange:()=>s({adobeOptions:{...S,showAnnotationTools:!S?.showAnnotationTools}})})]})})]})]}),!u&&(0,r.jsxs)(r.Fragment,{children:[g&&(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("Enable Alert","pdfp"),id:"alert",checked:v,onChange:()=>s({alert:!v})}),!g&&n&&(0,r.jsx)(b.ToggleControl,{label:(0,l.__)("Allow print","pdfp"),id:"print",checked:d,onChange:()=>s({print:!d})}),n&&(0,r.jsx)(b.ToggleControl,{label:(0,l.__)("Show title on top","pdfp"),id:"showName",checked:i,onChange:()=>s({showName:!i})}),(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("Raw PDF","pdfp"),id:"onlyPDF",checked:c,onChange:()=>s({onlyPDF:!c})}),!g&&(0,r.jsxs)(t.Fragment,{children:[(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("Enable Google Doc Viewer","pdfp"),id:"defaultBrowser",checked:p,onChange:()=>s({defaultBrowser:!p}),help:"only work on Microsoft Edge browser"}),(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("Show download button","pdfp"),id:"downloadButton",checked:h,onChange:()=>s({downloadButton:!h})}),h&&(0,r.jsx)(fe,{isPremium:n,Component:b.TextControl,label:"Download Button Text",value:f,onChange:e=>s({downloadButtonText:e})})]}),!g&&(0,r.jsxs)(t.Fragment,{children:[(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("Show fullscreen button","pdfp"),id:"fullscreenButton",checked:m,onChange:()=>s({fullscreenButton:!m})}),m&&(0,r.jsxs)(t.Fragment,{children:[n&&(0,r.jsx)(b.TextControl,{label:(0,l.__)("Fullscreen Button Text","pdfp"),value:x,onChange:e=>s({fullscreenButtonText:e})}),(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("Open fullscreen in new window","pdfp"),id:"newWindow",checked:_,onChange:()=>s({newWindow:!_})})]})]}),!c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("Enable thumbnails toggle menu","pdfp"),id:"thumbMenu",checked:w,onChange:()=>s({thumbMenu:!w})}),w&&(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("Show Thumb by Default","pdfp"),id:"sidebarOpen",checked:j,onChange:()=>s({sidebarOpen:!j})})]}),(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("Load the last version of the PDF","pdfp"),id:"lastVersion",checked:P,onChange:()=>s({lastVersion:!P})}),(0,r.jsx)(fe,{isPremium:n,Component:b.ToggleControl,label:(0,l.__)("Horizontal Scrollbar","pdfp"),id:"hrScroll",checked:F,onChange:()=>s({hrScroll:!F})}),(0,r.jsx)(fe,{label:(0,l.__)("Initail page","pdfp"),isPremium:n,Component:b.__experimentalNumberControl,isShiftStepEnabled:!0,onChange:e=>s({initialPage:e}),shiftStep:1,value:y}),(0,r.jsx)(fe,{label:(0,l.__)("Zoom Level (%)","pdfp"),isPremium:n,Component:b.__experimentalNumberControl,help:(0,l.__)("leave empty to set auto","pdfp"),isShiftStepEnabled:!0,onChange:e=>s({zoomLevel:parseInt(e)}),min:25,max:400,shiftStep:1,value:C})]})]})})}const _e=({attributes:e,updatePopupOptions:t})=>{const{enabled:n,btnStyle:o,text:a}=e.popupOptions||{};return(0,r.jsxs)(b.PanelBody,{title:"Popup Settings",initialOpen:!0,children:[(0,r.jsx)(b.ToggleControl,{label:"Enable",checked:n,onChange:()=>t("enabled",!n)}),n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.TextControl,{value:a,onChange:e=>t("text",e),placeholder:"Open PDF",label:(0,l.__)("Button Text","pdfp")}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{children:(0,l.__)("Background","bpm")}),(0,r.jsx)(m,{value:o?.background,onChange:e=>t("btnStyle",{...o,background:e})})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{children:(0,l.__)("Text Color","bpm")}),(0,r.jsx)(m,{value:o?.color,onChange:e=>t("btnStyle",{...o,color:e})})]}),(0,r.jsx)(g,{title:(0,l.__)("Padding","pdfp"),value:o?.padding||{},onChange:e=>t("btnStyle",{...o,padding:e})})]})]})},ge=e=>{const{getCurrentPostId:o}=(0,v.select)("core/editor"),a=(0,t.useRef)(null),[s,i]=(0,t.useState)(!1),[d,c]=(0,t.useState)(!1),[p,u]=(0,t.useState)(!1),[h,f]=(0,t.useState)(pdfp?.pipe),{attributes:x,preset:_,setPreset:w,setAttributes:j,setModalOpen:C}=e,{file:P,title:F,titleFontSize:S,height:N,width:T,showName:k,print:D,adobeEmbedder:B,fullscreenButtonText:O,alignment:E,popupOptions:R}=x,{additional:A,adobeOptions:I,popupBtnStyle:L,popupBtnText:M,statePresets:$=[]}=x;(0,t.useEffect)((()=>{if("undefined"!=typeof Dropbox){const t={success:e=>{j({file:e?.[0]?.link})},cancel:()=>null,linkType:"preview",multiselect:!1,folderselect:!1};var e=Dropbox.createChooseButton(t);setTimeout((()=>{a.current&&!a.current?.hasChildNodes()&&a.current.appendChild(e)}),1e3)}(async()=>{const{data:e}=await y("GET",{model:"Presets",method:"all"});j({statePresets:e})})()}),[]);const z=(0,v.select)("core/editor").getCurrentPostType(),U=o();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.InspectorControls,{style:{marginBottom:"40px"},children:(0,r.jsx)(t.Fragment,{children:(0,r.jsxs)(b.Panel,{children:["pdfposter"===z&&(0,r.jsx)(b.PanelBody,{children:(0,r.jsx)(b.PanelRow,{children:(0,r.jsxs)("div",{className:"pdfp_front_shortcode",children:[(0,r.jsx)("input",{value:`[pdf id=${U}]`}),(0,r.jsx)("span",{className:"htooltip",children:(0,l.__)("Copy To Clipboard","pdfp")})]})})}),(0,r.jsxs)(b.PanelBody,{title:(0,l.__)("General","pdfp"),children:[h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{id:"picker_container",ref:a}),(0,r.jsx)(me,{setAttributes:j,clientId:fpdfAdmin?.gClientId,appId:fpdfAdmin?.gAppId,developerKey:fpdfAdmin?.gDeveloperKey})]}),(0,r.jsx)(b.PanelRow,{children:(0,r.jsx)("label",{className:"label",children:(0,l.__)("Upload PDF","pdfp")})}),(0,r.jsx)(be,{type:["application/pdf"],onSelect:e=>j({file:e}),value:P,placeholder:"Audio URL"}),h&&(0,r.jsx)(b.TextControl,{disabled:!h,label:(0,l.__)("Title","pdfp"),value:F,onChange:e=>j({title:e})}),!h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b.PanelRow,{}),(0,r.jsx)(b.ToggleControl,{label:(0,l.__)("Allow print","pdfp"),id:"print",checked:D,onChange:()=>j({print:!D})}),(0,r.jsx)(b.ToggleControl,{label:(0,l.__)("Show title on top","pdfp"),id:"showName",checked:k,onChange:()=>j({showName:!k})}),(0,r.jsx)(b.TextControl,{label:(0,l.__)("Fullscreen Button Text","pdfp"),value:O,onChange:e=>j({fullscreenButtonText:e})})]})]}),h&&(0,r.jsxs)(b.PanelBody,{title:(0,l.__)("Presets","pdfp"),children:[(0,r.jsx)("div",{className:"pdfp-presets",children:$?.map((e=>(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"pdfp-preset-item",children:[(0,r.jsx)("div",{className:"box",onClick:()=>{j({...e.preset})},children:(0,r.jsx)("span",{children:e.name?.[0]?.toUpperCase()})}),(0,r.jsxs)("div",{className:"actions",children:[(0,r.jsx)(b.Dashicon,{icon:"edit",title:(0,l.__)("Edit","pdfp"),onClick:()=>{w(e),C(!0)}}),(0,r.jsx)(b.Dashicon,{icon:"trash",title:(0,l.__)("Delete","pdfp"),onClick:t=>{t.preventDefault(),c(e.id)}})]}),(0,r.jsx)("p",{children:e?.name||(0,l.__)("Unknown Name","pdfp")})]})})))}),(0,r.jsx)(b.Button,{variant:"primary",onClick:()=>{C(!0);const{statePresets:e,...t}=x;w({preset:t})},children:(0,l.__)("Add New Preset","pdfp")})]}),(0,r.jsx)(xe,{...e}),h&&(0,r.jsx)(_e,{attributes:x,updatePopupOptions:(e,t)=>{const n=he(R,(n=>{n[e]=t}));j({popupOptions:n})}}),(0,r.jsxs)(b.PanelBody,{title:(0,l.__)("Style","pdfp"),initialOpen:!1,children:[(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"Height",className:"label",children:(0,l.__)("Height","pdfp")}),(0,r.jsx)(b.__experimentalUnitControl,{onChange:e=>j({height:e}),value:N,units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100},{value:"vh",label:"vh",default:100}],isResetValueOnUnitChange:!0})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{htmlFor:"width",className:"label",children:(0,l.__)("Width","pdfp")}),(0,r.jsx)(b.__experimentalUnitControl,{onChange:e=>j({width:e}),value:T,units:[{value:"px",label:"px",default:500},{value:"%",label:"%",default:100},{value:"vw",label:"vw",default:100}],isResetValueOnUnitChange:!0})]}),h&&(0,r.jsx)(b.__experimentalUnitControl,{label:(0,l.__)("Title Font Size","pdfp"),onChange:e=>j({titleFontSize:e}),value:S,units:[{value:"px",label:"px",default:16},{value:"em",label:"em",default:1},{value:"rem",label:"rem",default:1}],isResetValueOnUnitChange:!0})]}),"LIGHT_BOX"===I.embedMode&&B&&h&&(0,r.jsxs)(b.PanelBody,{title:(0,l.__)("Adobe Lightbox Button Style","pdfp"),children:[(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{children:(0,l.__)("Background","bpm")}),(0,r.jsx)(m,{value:L?.background,onChange:e=>j({popupBtnStyle:{...L,background:e}})})]}),(0,r.jsxs)(b.PanelRow,{children:[(0,r.jsx)("label",{children:(0,l.__)("Text Color","bpm")}),(0,r.jsx)(m,{value:L?.color,onChange:e=>j({popupBtnStyle:{...L,color:e}})})]}),(0,r.jsx)(g,{title:(0,l.__)("Padding","pdfp"),value:L?.padding||{},onChange:e=>j({popupBtnStyle:{...L,padding:e}})})]}),(0,r.jsxs)(b.PanelBody,{title:(0,l.__)("Additional","pdfp"),initialOpen:!1,children:[(0,r.jsx)(fe,{isPremium:h,Component:b.TextControl,label:(0,l.__)("Class","pdfp"),value:A.Class,onChange:e=>j({additional:{...A,Class:e}})}),(0,r.jsx)(fe,{isPremium:h,Component:b.TextareaControl,label:(0,l.__)("CSS","pdfp"),value:A.CSS,onChange:e=>j({additional:{...A,CSS:e}})})]})]})})}),d&&(0,r.jsx)(b.Modal,{title:(0,l.__)("Do you want to delete?","pdfp"),onRequestClose:()=>c(!1),children:(0,r.jsxs)("div",{className:"confirmPresetDelete",children:[p&&(0,r.jsx)("span",{className:"pdfp_loader"}),(0,r.jsx)(b.Button,{disabled:p,variant:"primary",onClick:()=>{i(!0),(async e=>{u(!0);const{data:t}=await(async e=>await jQuery.ajax({method:"POST",url:pdfp?.ajax_url,dataType:"json",data:{action:"pdf_poster_ajax",nonce:pdfp?.nonce,model:"Presets",method:"delete",id:e}}).then((e=>e)).catch((e=>console.log({err:e}))))(e);t&&j({statePresets:$.filter((t=>t.id!==e))}),c(!1),u(!1)})(d)},children:(0,l.__)("Yes","pdfp")})]})}),(0,r.jsx)(n.BlockControls,{children:(0,r.jsx)(n.AlignmentToolbar,{value:E,onChange:e=>j({alignment:e}),describedBy:(0,l.__)("Alert Alignment"),alignmentControls:[{title:(0,l.__)("Alert in left","b-blocks"),align:"left",icon:"align-left"},{title:(0,l.__)("Alert in center","b-blocks"),align:"center",icon:"align-center"},{title:(0,l.__)("Alert in right","b-blocks"),align:"right",icon:"align-right"}]})})]})},we=window.wp.element,je=({setAttributes:e})=>{const[t,o]=(0,we.useState)(""),[a,s]=(0,we.useState)(!0),[i,d]=(0,we.useState)(!0);return(0,r.jsx)(we.Fragment,{children:(0,r.jsxs)(b.Placeholder,{icon:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"html5-block-icon",children:[(0,r.jsx)("polygon",{points:"23 7 16 12 23 17 23 7"}),(0,r.jsx)("rect",{x:"1",y:"5",width:"15",height:"14",rx:"2",ry:"2"})]}),instructions:(0,l.__)("Upload a PDF or paste/write PDF URL.","pdfp"),label:(0,l.__)("Upload a PDF ","pdfp"),children:[(0,r.jsx)(n.MediaUploadCheck,{children:(0,r.jsx)(n.MediaUpload,{allowedTypes:["application/pdf"],onSelect:t=>e({file:t.url}),render:({open:e})=>(0,r.jsx)(b.Button,{isPrimary:!0,onClick:e,children:(0,l.__)("Upload","pdfp")})})}),(0,r.jsxs)("div",{className:"h5vpUrlInput",children:[(0,r.jsx)("h3",{style:{fontSize:"15px"},children:" Or "}),(0,r.jsx)("input",{type:"url","aria-label":(0,l.__)("URL","pdfp"),placeholder:(0,l.__)("Paste or type a PDF URL","pdfp"),onChange:e=>{pdfp?.pipe?o(e.target.value):d(!0)},value:t}),(0,r.jsx)(b.Button,{label:(0,l.__)("Apply","pdfp"),type:"submit",onClick:n=>{if(n.preventDefault(),l=t,!new RegExp("https?","i").test(l))return s(!1),!1;var l;s(!0),o(""),e({file:t})},isPrimary:!0,children:(0,l.__)("Apply","pdfp")})]}),!a&&(0,r.jsx)("p",{style:{color:"#bd1818",width:"100%",margin:0},children:(0,l.__)("URL is not valid","pdfp")})]})})};(0,window.wp.blocks.registerBlockType)(e,{edit:function(e){const{attributes:o,setAttributes:a,clientId:s,isSelected:i}=e,{alignment:d,file:c=pdfp?.placeholder,additional:p}=o,u=(0,n.useBlockProps)(),[h,b]=(0,t.useState)(!1),[m,x]=(0,t.useState)({preset:o});(0,t.useEffect)((()=>{}),[]);const _=`pdfp-${s}`;return c?(0,r.jsxs)("div",{...u,style:{textAlign:d},children:[i?"":(0,r.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",top:0,left:0,minHeight:"400px"}}),(0,r.jsx)("style",{children:p?.CSS}),(0,r.jsx)(ge,{setModalOpen:b,...e,setPreset:x}),(0,r.jsx)(f,{attributes:o,RichText:n.RichText,__:l.__,setAttributes:a,editor:!0,id:_}),pdfp?.pipe&&(0,r.jsx)(r.Fragment,{children:h&&(0,r.jsx)(C,{preset:m,setPreset:x,setModalOpen:b,...e,id:_})})]}):(0,r.jsx)(je,{attributes:o,setAttributes:a})},save:()=>null})})();