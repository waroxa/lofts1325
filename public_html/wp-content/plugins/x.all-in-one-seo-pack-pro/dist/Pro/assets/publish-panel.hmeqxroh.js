import{x as P,o as a,c,a as r,F,J as N,l as z,G as $,v as R,y as M,t as u,C as y,b as h,Y as H}from"./js/runtime-dom.esm-bundler.h3wlw8jh.js";import{l as Y}from"./js/index.lee45600.js";import{l as q}from"./js/index.h6q9ey6x.js";import{l as J}from"./js/index.moogjen0.js";import{u as W,a as j,g as Q,d as G,H as X,l as K,c as Z}from"./js/index.ms17x8jb.js";import{c as ee,a as te}from"./js/allowed.dfbz6krv.js";import{t as oe}from"./js/postSlug.nfaf8ycs.js";import{v as se}from"./js/helpers.dyu2l85l.js";import{u as ie}from"./js/Image.o6sztqvi.js";import{u as re}from"./js/Tags.kjrcauo6.js";import{C as ne}from"./js/GoogleSearchPreview.kcp8t66k.js";import{c as ae,e as ce,f as le}from"./js/Caret.mmz7e9vd.js";import{S as pe}from"./js/Exclamation.k8fogrns.js";import{S as de}from"./js/External.f5l8nu9j.js";import"./js/translations.b896ab1m.js";import{_}from"./js/_plugin-vue_export-helper.oebm7xum.js";import{_ as i,a as ue,b as me}from"./js/default-i18n.hohxoesu.js";import{S as ge}from"./js/Twitter.g3lf6nkm.js";import{s as he}from"./js/metabox.ejlpgbw1.js";import{l as _e}from"./js/loadTruSeo.jaru89rf.js";import{e as fe}from"./js/elemLoaded.f718isk5.js";import{t as ve}from"./js/toString.dd8wo7ge.js";import{u as ye}from"./js/upperFirst.oqo5qnuq.js";import"./js/deburr.h0pzx1ve.js";import"./js/cleanForSlug.g19v7edy.js";import"./js/_baseTrim.ohbpllmu.js";import"./js/_stringToArray.mpukyt2g.js";import"./js/_baseSet.ifi8fiaf.js";import"./js/constants.d8cemsm4.js";function Se(t){return ye(ve(t).toLowerCase())}var D=ee(function(t,e,o){return e=e.toLowerCase(),t+(o?Se(e):e)});const n="all-in-one-seo-pack",Pe={setup(){const{imageUrl:t,setImageUrl:e}=ie(),{parseTags:o}=re({separator:void 0});return{imageUrl:t,optionsStore:W(),parseTags:o,postEditorStore:j(),setImageUrl:e,settingsStore:Q(),tagsStore:G()}},components:{CoreGoogleSearchPreview:ne,SvgCircleCheck:ae,SvgCircleClose:ce,SvgCircleExclamation:pe,SvgExternal:de,SvgPencil:le},data(){return{allowed:te,socialImage:null,socialImageKey:0,strings:{serpPreview:i("SERP Preview",n),canonicalUrl:i("Canonical URL",n)}}},computed:{tips(){let t=[{label:i("Visibility",n),name:"visibility",access:"aioseo_page_advanced_settings"},{label:i("SEO Analysis",n),name:"seoAnalysis",access:"aioseo_page_analysis"},{label:i("Readability",n),name:"readabilityAnalysis",access:"aioseo_page_analysis"},{label:i("Focus Keyphrase",n),name:"focusKeyphrase",access:"aioseo_page_analysis"},{label:i("Social",n),name:"social",access:"aioseo_page_social_settings"}].filter(e=>this.allowed(e.access)&&(e.access!=="aioseo_page_analysis"||oe()));return!this.optionsStore.options.social.facebook.general.enable&&!this.optionsStore.options.social.twitter.general.enable&&(t=t.filter(e=>e.name!=="social")),t.forEach((e,o)=>{t[o]={...e,...this.getData(e.name)}}),t},canImprove(){return this.tips.some(t=>t.type==="error")}},methods:{getIcon(t){switch(t){case"error":return"svg-circle-close";case"warning":return"svg-circle-exclamation";case"success":default:return"svg-circle-check"}},getData(t){const e={};if(t==="visibility"&&(e.value=i("Good!",n),e.type="success",(this.postEditorStore.currentPost.default?this.optionsStore.dynamicOptions.searchAppearance.postTypes[this.postEditorStore.currentPost.postType]&&!this.optionsStore.dynamicOptions.searchAppearance.postTypes[this.postEditorStore.currentPost.postType].advanced.robotsMeta.default&&this.optionsStore.dynamicOptions.searchAppearance.postTypes[this.postEditorStore.currentPost.postType].advanced.robotsMeta.noindex:this.postEditorStore.currentPost.noindex)&&(e.value=i("Blocked!",n),e.type="error")),t==="seoAnalysis"){e.value=i("N/A",n),e.type="error";const o=this.postEditorStore.currentPost.seo_score;Number.isInteger(o)&&(e.value=o+"/100",e.type=80<o?"success":50<o?"warning":"error")}if(t==="readabilityAnalysis"){e.value=i("Good!",n),e.type="success";const o=this.postEditorStore.currentPost.page_analysis.analysis.readability.errors;o&&0<o&&(e.value=ue(me("%1$s error found!","%1$s errors found!",o,n),o),e.type="error")}if(t==="focusKeyphrase"){e.value=i("No focus keyphrase!",n),e.type="error";const o=this.postEditorStore.currentPost.keyphrases.focus;o&&o.keyphrase&&(e.value=o.score+"/100",e.type=80<o.score?"success":50<o.score?"warning":"error")}if(t==="social"){e.value=i("Good!",n),e.type="success",this.socialImageKey;const o=this.parseTags(this.postEditorStore.currentPost.og_title||this.postEditorStore.currentPost.title||this.postEditorStore.currentPost.tags.title).trim(),s=this.parseTags(this.postEditorStore.currentPost.og_description||this.postEditorStore.currentPost.description||this.postEditorStore.currentPost.tags.description).trim(),l=this.socialImage;(!o||!s||!l)&&(e.value=i("Missing social markup!",n),e.type="error")}return{...e,icon:this.getIcon(e.type)}},openSidebar(t){const{openGeneralSidebar:e}=window.wp.data.dispatch("core/edit-post"),{closePublishSidebar:o}=window.wp.data.dispatch(se(window.aioseo.wpVersion,"6.6","<")?"core/edit-post":"core/editor");o(),e("aioseo-post-settings-sidebar/aioseo-post-settings-sidebar");const s={};switch(t){case"canonical":case"visibility":s.tab="advanced";break;case"seoAnalysis":s.tab="general",s.card="basicseo";break;case"readabilityAnalysis":s.tab="general",s.card="readability";break;case"focusKeyphrase":s.tab="general",s.card="focus";break;case"social":s.tab="social";break}this.settingsStore.changeTabSettings({setting:"mainSidebar",value:s})}},async mounted(){await this.setImageUrl().then(()=>{this.socialImage=this.imageUrl}),window.aioseoBus.$on("updateSocialImagePreview",t=>{this.socialImage=t.image,this.socialImageKey++}),this.$nextTick(()=>{const t=document.querySelector(".aioseo-pre-publish .editor-post-publish-panel__link");t&&(t.innerHTML=this.canImprove?i("Your post needs improvement!",n):i("You're good to go!",n))})}},we={key:0,class:"seo-overview"},be={class:"pre-publish-checklist"},Ee={class:"icon"},ke=["onClick"],xe={key:0,class:"snippet-preview"},Ce={class:"title"},Te={key:1,class:"canonical-url"},Ie={class:"title"},Ae=["href"];function Oe(t,e,o,s,l,m){const d=P("svg-pencil"),g=P("core-google-search-preview"),f=P("svg-external");return s.postEditorStore.currentPost.id?(a(),c("div",we,[r("ul",be,[(a(!0),c(F,null,N(m.tips,(p,v)=>(a(),c("li",{key:v},[r("span",Ee,[(a(),z(R(p.icon),{class:$(p.type)},null,8,["class"]))]),r("span",null,[M(u(p.label)+": ",1),r("span",{class:$(["result",p.value.endsWith("/100")?p.type:null])},u(p.value),3)]),s.optionsStore.dynamicOptions.searchAppearance.postTypes[s.postEditorStore.currentPost.postType]&&s.optionsStore.dynamicOptions.searchAppearance.postTypes[s.postEditorStore.currentPost.postType].advanced.showMetaBox?(a(),c("span",{key:0,class:"edit",onClick:S=>m.openSidebar(p.name)},[y(d)],8,ke)):h("",!0)]))),128))]),l.allowed("aioseo_page_analysis")?(a(),c("div",xe,[r("p",Ce,u(l.strings.serpPreview)+":",1),y(g,{url:s.tagsStore.liveTags.permalink,title:s.parseTags(s.postEditorStore.currentPost.title||s.postEditorStore.currentPost.tags.title||"#post_title #separator_sa #site_title"),description:s.parseTags(s.postEditorStore.currentPost.description||s.postEditorStore.currentPost.tags.description||"#post_content")},null,8,["url","title","description"])])):h("",!0),l.allowed("aioseo_page_analysis")&&s.postEditorStore.currentPost.canonicalUrl?(a(),c("div",Te,[r("p",Ie,[M(u(l.strings.canonicalUrl)+": ",1),r("span",{class:"edit",onClick:e[0]||(e[0]=p=>m.openSidebar("canonical"))},[y(d)])]),r("a",{href:s.postEditorStore.currentPost.canonicalUrl,target:"_blank",rel:"noopener noreferrer"},[r("span",null,u(s.postEditorStore.currentPost.canonicalUrl),1),y(f)],8,Ae)])):h("",!0)])):h("",!0)}const L=_(Pe,[["render",Oe]]),Ve={},$e={width:"32",height:"32",fill:"none",class:"aioseo-facebook-rounded",xmlns:"http://www.w3.org/2000/svg"},Me=r("circle",{cx:"16",cy:"16",r:"16",fill:"currentColor"},null,-1),De=r("path",{d:"M24 16c0-4.4-3.6-8-8-8s-8 3.6-8 8c0 4 2.9 7.3 6.7 7.9v-5.6h-2V16h2v-1.8c0-2 1.2-3.1 3-3.1.9 0 1.8.2 1.8.2v2h-1c-1 0-1.3.6-1.3 1.2V16h2.2l-.4 2.3h-1.9V24c4-.6 6.9-4 6.9-8z",fill:"#fff"},null,-1),Le=[Me,De];function Ue(t,e){return a(),c("svg",$e,Le)}const Be=_(Ve,[["render",Ue]]),Fe={},Ne={width:"32",height:"32",fill:"none",class:"aioseo-linkedin-rounded",xmlns:"http://www.w3.org/2000/svg"},ze=r("circle",{cx:"16",cy:"16",r:"16",fill:"currentColor"},null,-1),Re=r("path",{d:"M11.6 24H8.2V13.3h3.4V24zM9.9 11.8C8.8 11.8 8 11 8 9.9 8 8.8 8.9 8 9.9 8c1.1 0 1.9.8 1.9 1.9 0 1.1-.8 1.9-1.9 1.9zM24 24h-3.4v-5.8c0-1.7-.7-2.2-1.7-2.2s-2 .8-2 2.3V24h-3.4V13.3h3.2v1.5c.3-.7 1.5-1.8 3.2-1.8 1.9 0 3.9 1.1 3.9 4.4V24h.2z",fill:"#fff"},null,-1),Ge=[ze,Re];function Ke(t,e){return a(),c("svg",Ne,Ge)}const He=_(Fe,[["render",Ke]]),Ye={},qe={width:"32",height:"32",fill:"none",class:"aioseo-pinterest-rounded",xmlns:"http://www.w3.org/2000/svg"},Je=r("circle",{cx:"16",cy:"16",r:"16",fill:"currentColor"},null,-1),We=r("path",{d:"M16.056 6.583c-5.312 0-9.658 4.346-9.658 9.658a9.581 9.581 0 005.795 8.813c0-.724 0-1.448.12-2.173.242-.845 1.207-5.312 1.207-5.312s-.362-.604-.362-1.57c0-1.448.846-2.535 1.811-2.535.845 0 1.328.604 1.328 1.45 0 .844-.603 2.172-.845 3.38-.241.965.483 1.81 1.57 1.81 1.81 0 3.018-2.293 3.018-5.19 0-2.174-1.449-3.743-3.984-3.743-2.898 0-4.709 2.173-4.709 4.587 0 .845.242 1.449.604 1.932.12.241.242.241.12.483 0 .12-.12.603-.24.724-.121.242-.242.362-.483.242-1.329-.604-1.932-2.053-1.932-3.743 0-2.777 2.294-6.036 6.881-6.036 3.743 0 6.157 2.656 6.157 5.553 0 3.743-2.052 6.64-5.19 6.64-1.087 0-2.053-.603-2.415-1.207 0 0-.604 2.173-.725 2.656a10.702 10.702 0 01-.966 2.052c.846.242 1.811.363 2.777.363 5.312 0 9.658-4.347 9.658-9.659.121-4.829-4.225-9.175-9.537-9.175z",fill:"#fff"},null,-1),je=[Je,We];function Qe(t,e){return a(),c("svg",qe,je)}const Xe=_(Ye,[["render",Qe]]),U="all-in-one-seo-pack",Ze={setup(){return{tagsStore:G()}},components:{SvgFacebookRounded:Be,SvgLinkedinRounded:He,SvgPinterestRounded:Xe,SvgIconTwitter:ge},data(){return{strings:{title:i("Get out the word!",U),description:i("Share your content on your favorite social media platforms to drive engagement and increase your SEO.",U)}}},computed:{socialNetworks(){return[{icon:"svg-icon-twitter",link:"https://x.com/share?url="},{icon:"svg-facebook-rounded",link:"https://www.facebook.com/sharer/sharer.php?u="},{icon:"svg-pinterest-rounded",link:"https://pinterest.com/pin/create/button/?url="},{icon:"svg-linkedin-rounded",link:"https://www.linkedin.com/shareArticle?url="}].map(t=>({...t,link:t.link+this.tagsStore.liveTags.permalink}))}}},et={key:0,class:"aioseo-post-publish"},tt={class:"title"},ot={class:"description"},st={class:"links"},it=["href"];function rt(t,e,o,s,l,m){return s.tagsStore.liveTags.permalink?(a(),c("div",et,[r("h2",tt,u(l.strings.title),1),r("p",ot,u(l.strings.description),1),r("div",st,[(a(!0),c(F,null,N(m.socialNetworks,(d,g)=>(a(),c("a",{class:"link",target:"_blank",key:g,href:d.link},[(a(),z(R(d.icon)))],8,it))),128))])])):h("",!0)}const nt=_(Ze,[["render",rt]]);(function(t){var g,f,p,v,S,w,b,E,k,x,C,T,I,A,O,V;if(!X()||!he()||!((f=(g=window.wp)==null?void 0:g.editor)!=null&&f.PluginDocumentSettingPanel)&&!((v=(p=window.wp)==null?void 0:p.editPost)!=null&&v.PluginDocumentSettingPanel))return;const e=((w=(S=window==null?void 0:window.wp)==null?void 0:S.editor)==null?void 0:w.PluginDocumentSettingPanel)||((E=(b=window.wp)==null?void 0:b.editPost)==null?void 0:E.PluginDocumentSettingPanel),o=((x=(k=window==null?void 0:window.wp)==null?void 0:k.editor)==null?void 0:x.PluginPrePublishPanel)||((T=(C=window.wp)==null?void 0:C.editPost)==null?void 0:T.PluginPrePublishPanel),s=((A=(I=window==null?void 0:window.wp)==null?void 0:I.editor)==null?void 0:A.PluginPostPublishPanel)||((V=(O=window.wp)==null?void 0:O.editPost)==null?void 0:V.PluginPostPublishPanel),l=t.plugins.registerPlugin;K();const d=Z().aioseo.user;!d.capabilities.aioseo_page_analysis&&!d.capabilities.aioseo_page_general_settings&&!d.capabilities.aioseo_page_advanced_settings||l("aioseo-publish-panel",{render:()=>t.element.createElement(t.element.Fragment,{},t.element.createElement(e,{title:"AIOSEO",className:"aioseo-document-setting aioseo-seo-overview",icon:t.element.Fragment},t.element.createElement("div",{},t.element.createElement("div",{id:"aioseo-document-setting"}))),t.element.createElement(o,{title:["AIOSEO",":",t.element.createElement("span",{key:"scoreDescription",className:"editor-post-publish-panel__link"})],className:"aioseo-pre-publish aioseo-seo-overview",initialOpen:!0,icon:t.element.Fragment},t.element.createElement("div",{},t.element.createElement("div",{id:"aioseo-pre-publish"}))),t.element.createElement(s,{title:"AIOSEO",initialOpen:!0,icon:t.element.Fragment},t.element.createElement("div",{},t.element.createElement("div",{id:"aioseo-post-publish"}))))})})(window.wp);const B=t=>{let e=H({...t.component,name:"Standalone/PublishPanel"});return e=Y(e),e=q(e),e=J(e),K(e),e.mount("#"+t.id),window.addEventListener("load",()=>{_e(e,!1)}),e};window.aioseo.currentPost&&window.aioseo.currentPost.context==="post"&&[{id:"aioseo-pre-publish",component:L},{id:"aioseo-document-setting",component:L},{id:"aioseo-post-publish",component:nt}].forEach(e=>{document.getElementById(e.id)?B(e):(fe("#"+e.id,D(e.id)),document.addEventListener("animationstart",function(o){D(e.id)===o.animationName&&B(e)},{passive:!0}))});
