import{c as S,u as V,D as I,z as U,e as E,b as R}from"./index.ms17x8jb.js";import Y from"./BadBotBlocker.fngvzdzw.js";import{C as H}from"./Index.357n8h84.js";import z from"./DatabaseTools.e18ejavh.js";import{C as K,S as P}from"./Caret.mmz7e9vd.js";import{C as F}from"./Card.iorx4a6j.js";import{C as G}from"./Tabs.olufoui4.js";import{C as W}from"./Index.j0jgp0il.js";import{C as q}from"./NetworkSiteSelector.ovirms9b.js";import{C as J}from"./SettingsRow.ea488ybt.js";import{B as j}from"./Checkbox.ksyjjc49.js";import{G as Q,a as X}from"./Row.o2r9j8ur.js";import"./translations.b896ab1m.js";import{_ as k}from"./_plugin-vue_export-helper.oebm7xum.js";import{_ as T,a as p}from"./default-i18n.hohxoesu.js";import{x as l,o as n,c as g,C as m,m as u,F as x,J as L,l as _,y as w,t as h,a as c,b as v,v as M,E as Z}from"./runtime-dom.esm-bundler.h3wlw8jh.js";import ee from"./HtaccessEditor.f02nif0e.js";import oe from"./ImportExport.mj6kwhn1.js";import te from"./RobotsEditor.gk86gqiu.js";import se from"./SystemStatus.oa65sr9y.js";import ie from"./WpCode.j33b09vb.js";import"./helpers.dyu2l85l.js";import"./Textarea.h27mw65u.js";import"./Tooltip.i4ssodi5.js";import"./index.h6q9ey6x.js";import"./Slide.bl4b075t.js";import"./vue-router.kh6ggxxn.js";import"./license.kld2zdxf.js";import"./upperFirst.oqo5qnuq.js";import"./_stringToArray.mpukyt2g.js";import"./toString.dd8wo7ge.js";import"./allowed.dfbz6krv.js";import"./deburr.h0pzx1ve.js";/* empty css             */import"./params.k8e95b6q.js";import"./Header.45xwlfdh.js";import"./addons.b4tcn9l3.js";import"./ScrollAndHighlight.n54dzrjh.js";import"./ScrollTo.ntqtkazp.js";import"./LicenseKeyBar.hbcs2hg4.js";import"./LogoGear.cppzhid7.js";import"./AnimatedNumber.bhnjafak.js";import"./numbers.busvl4mt.js";import"./Logo.hc2uc75u.js";import"./Support.d9rg0n6z.js";import"./date.lf1kpfnj.js";import"./constants.d8cemsm4.js";import"./Url.eb5t9tf7.js";import"./Exclamation.k8fogrns.js";import"./Gear.fv5bjmis.js";import"./Network.pa3t97oy.js";import"./ToolsSettings.gprf3iml.js";import"./Checkmark.kpu6r7ix.js";import"./Blur.im8lkvwf.js";import"./Index.ezxlh32q.js";import"./RequiredPlans.iq78lp87.js";import"./TruSeoScore.o5r0icxl.js";import"./postSlug.nfaf8ycs.js";import"./metabox.ejlpgbw1.js";import"./cleanForSlug.g19v7edy.js";import"./_baseTrim.ohbpllmu.js";import"./_baseSet.ifi8fiaf.js";import"./ProBadge.kqrqznog.js";import"./Information.b2910xzr.js";import"./Ellipse.e6z3whsw.js";import"./Editor.k30kkf5m.js";import"./isEqual.36kb04be.js";import"./_baseIsEqual.hvlfp2dq.js";import"./_getTag.i5tbt0nk.js";import"./_baseClone.hjskggz2.js";import"./_arrayEach.n8ou32wp.js";import"./_getAllKeysIn.zqxbvqi0.js";import"./Plus.kxxpl2b6.js";import"./History.jiq29s53.js";import"./Refresh.n42desgp.js";import"./Upload.cihw1t0e.js";import"./Radio.dgnkd9yh.js";import"./Download.dz2ni7y9.js";import"./vuedraggable.umd.gbuaucz3.js";import"./External.f5l8nu9j.js";import"./Row.jrf2e4pb.js";const ne="all-in-one-seo-pack",re={emits:["update"],setup(){return{rootStore:S()}},components:{BaseCheckbox:j,GridColumn:Q,GridRow:X},props:{loading:Boolean,disabled:Boolean},data(){return{options:{},strings:{updateOptions:T("Update Options",ne)}}},mounted(){this.rootStore.aioseo.deprecatedOptions.forEach(e=>{e.enabled&&(this.options[e.value]=!0)})}},ae={class:"aioseo-deprecated-options"},le=c("br",null,null,-1),ce=c("br",null,null,-1),de=c("br",null,null,-1);function ue(e,t,s,r,o,a){const d=l("base-checkbox"),f=l("grid-column"),y=l("grid-row"),A=l("base-button");return n(),g("div",ae,[m(y,{class:"settings"},{default:u(()=>[(n(!0),g(x,null,L(r.rootStore.aioseo.deprecatedOptions,(b,D)=>(n(),_(f,{key:D,xl:"6",sm:"12"},{default:u(()=>[m(d,{size:"medium",modelValue:o.options[b.value],"onUpdate:modelValue":C=>o.options[b.value]=C,disabled:s.disabled},{default:u(()=>[w(h(b.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024))),128))]),_:1}),le,m(A,{type:"blue",size:"medium",onClick:t[0]||(t[0]=b=>e.$emit("update",o.options)),loading:s.loading,disabled:s.disabled},{default:u(()=>[w(h(o.strings.updateOptions),1)]),_:1},8,["loading","disabled"]),ce,de])}const pe=k(re,[["render",ue]]),me={setup(){return{optionsStore:V()}},computed:{infoItems(){return[{label:"Migrated Version",value:this.optionsStore.internalOptions.internal.migratedVersion},{label:"First Activated",value:this.optionsStore.internalOptions.internal.firstActivated!==0?I.fromMillis(this.optionsStore.internalOptions.internal.firstActivated*1e3).toFormat("MMMM d, yyyy"):!1}]}}},he={class:"v3-migration-info aioseo-description"},ge={class:"info-items"},_e={key:0},be={key:1};function fe(e,t,s,r,o,a){return n(),g("div",he,[c("ul",ge,[(n(!0),g(x,null,L(a.infoItems,(d,f)=>(n(),g("li",{key:f},[d.value?(n(),g("span",_e,h(d.label),1)):v("",!0),d.value?(n(),g("span",be,h(d.value),1)):v("",!0)]))),128))])])}const Ae=k(me,[["render",fe]]),we={setup(){return{rootStore:S(),toolsStore:U()}},components:{CoreAlert:K,CoreCard:F,CoreMainTabs:G,CoreModal:W,CoreNetworkSiteSelector:q,CoreSettingsRow:J,DeprecatedOptions:pe,MigrationInfo:Ae,SvgClose:P},props:{extraActions:{type:Array,required:!1}},data(){return{site:{},tabsKey:0,doingActionKey:0,activeTab:"general",currentAction:"",showAreYouSureModal:!1,doingAction:[],strings:{selectSite:"Select Site",cardLabel:"Debug",selectLabel:"Select a Debug Action:",buttonLabel:"Run Action",alertWarning:"Before you run any action, please make sure that you have fully read the description and understand the consequences as these cannot be reverted.",cannotBeUndone:"This action cannot be undone.",yesDoAction:"Yes, run this action",noChangedMind:"No, I changed my mind"},alertLink:E.getPlainLink("Click here to open to the Scheduled Actions panel",this.rootStore.aioseo.urls.admin.scheduledActions,!0)}},computed:{areYouSureTitle(){return`Are you sure you want to run the "${this.currentAction.label}" action?`},tabs(){const e=p('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions),t=this.rootStore.aioseo.data.isNetworkAdmin?"<br><strong>NOTE: If no site is selected, this will clear the network cache.</strong>":"",s=this.rootStore.aioseo.data.isNetworkAdmin?"<br><strong>NOTE: If no site is selected, this will clear the network plugin updates transient.</strong>":"";return[{slug:"general",name:"General",actions:[{label:"Clear Cache",slug:"clear-cache",shortDescription:`This action deletes all records of the <code>aioseo_cache</code> table in the database.${t}`,longDescription:"",showModal:!1,network:!0},{label:"Clear Plugin Updates Transient",slug:"clear-plugin-updates-transient",shortDescription:`This action clears the plugin updates transient, which forces WordPress Core to check for plugin updates.${s}`,longDescription:"",showModal:!1,network:!0},{label:"Readd Capabilities",slug:"readd-capabilities",shortDescription:"This action will readd our capabilities (access permissions) for all users.",longDescription:"",showModal:!1},{label:"Reset Data",slug:"reset-data",shortDescription:"This action will <strong>delete</strong> all our custom tables and options.",longDescription:"",showModal:!0}]},{slug:"sitemap",name:"Sitemap",actions:[{label:"Clear Image Data",slug:"clear-image-data",shortDescription:"This action removes all image data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:p("To speed up the image scan, go to %1$s and run the <code>aioseo_image_sitemap_scan</code> action.",e),showModal:!1}]},{slug:"migrations",name:"Migrations",actions:[{label:"Rerun V4+ Migrations",slug:"rerun-migrations",shortDescription:"This action will rerun all update migrations since 4.0.0, excluding the V3 migration.",longDescription:"",showModal:!0}]},{slug:"old-issues",name:"Old Issues",actions:[{label:"Remove Duplicates",slug:"remove-duplicates",shortDescription:"This action will delete any duplicate records that are found in the <code>aioseo_posts</code> and <code>aioseo_terms</code> tables.",longDescription:"",showModal:!1},{label:"Unescape Data",slug:"unescape-data",shortDescription:"This action will clean <code>aioseo_posts</code> and <code>aioseo_term</code> records whose data is corrupted.",longDescription:p("The action will trigger a routine which runs in batches via Action Scheduler. It may take some time for this routine to complete, To speed up this process, go to %1$s and run the <code>aioseo_unslash_escaped_data_posts</code> or <code>aioseo_unslash_escaped_data_terms</code> action.",e),showModal:!1}]},{slug:"deprecated-options",name:"Deprecated Options",actions:[{label:"Deprecated Options",slug:"deprecated-options",shortDescription:"Enable or disable any options that have been deprecated in AIOSEO.",longDescription:"<strong>These options are not guaranteed to work and all support has been dropped.</strong>",showModal:!1,component:"deprecated-options"}]}]},activeTabObject(){return this.tabs.find(e=>e.slug===this.activeTab)}},methods:{isActionDisabled(e){return this.rootStore.aioseo.data.isNetworkAdmin?this.site.blog_id?this.site.blog_id==="network"&&e.network?!1:this.site.blog_id==="network"&&!e.network:!0:!1},isLoading(e){return!!this.doingAction[e.slug]},getSelectedActionObject(e){let t=null;return this.actions.forEach(s=>{const r=s.options.find(o=>o.value===e);r&&(t=r)}),t},maybeDoAction(e,t){if(this.currentAction=e,e.showModal){this.showAreYouSureModal=!0;return}this.doAction(t)},doAction(e){this.doingAction[this.currentAction.slug]=!0,this.showAreYouSureModal=!1,this.doingActionKey++,this.toolsStore.doTask({action:this.currentAction.slug,siteId:this.site.blog_id||this.rootStore.aioseo.data.currentBlogId,data:e}).then(()=>{console.log(`Action "${this.currentAction.label}" has been completed.`)}).catch(t=>{console.error(`Action "${this.currentAction.label}" could not be completed: `,t)}).finally(()=>{this.doingAction[this.currentAction.slug]=!1,this.doingActionKey++})}},beforeMount(){var t;let e=-1;if(this.rootStore.aioseo.data.v3Options&&(e=this.tabs.findIndex(s=>s.slug.toLowerCase()==="migrations"),e!==-1)){const s=p('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions);this.tabs[e].actions.push({label:"Rerun V3 Migration",slug:"restart-v3-migration",shortDescription:"This action restarts the migration from V3 to V4.",longDescription:p("All settings will be migrated immediately. However, the post/term meta needs to be migrated via a routine which runs in batches via Action Scheduler. To speed up the post/term meta migration, go to %1$s and run the <code>aioseo_migrate_post_meta</code> or <code>aioseo_migrate_term_meta</code> action.",s),infoComponent:"MigrationInfo",showModal:!0})}(t=this.extraActions)!=null&&t.length&&this.extraActions.forEach(s=>{if(e=this.tabs.findIndex(r=>r.slug.toLowerCase()===s.slug.toLowerCase()),e!==-1){this.tabs[e].actions=this.tabs[e].actions.concat(s.actions);return}this.tabs.push(s)})}},ke={class:"aioseo-tools-debug"},ve={key:0,class:"aioseo-settings-row"},Se={class:"select-site"},ye=["innerHTML"],De=["innerHTML"],Ce=["innerHTML"],Te={class:"aioseo-modal-body"},Me=["innerHTML"];function xe(e,t,s,r,o,a){const d=l("core-network-site-selector"),f=l("core-alert"),y=l("core-main-tabs"),A=l("base-button"),b=l("core-settings-row"),D=l("svg-close"),C=l("core-modal"),B=l("core-card");return n(),g("div",ke,[m(B,{slug:"debug","header-text":o.strings.cardLabel},{default:u(()=>[r.rootStore.aioseo.data.isNetworkAdmin?(n(),g("div",ve,[c("div",Se,h(o.strings.selectSite),1),m(d,{onSelectedSite:t[0]||(t[0]=i=>o.site=i),"show-network":""})])):v("",!0),m(f,{type:"yellow"},{default:u(()=>[c("div",null,h(o.strings.alertWarning),1),c("div",{innerHTML:o.alertLink},null,8,ye)]),_:1}),(n(),_(y,{internal:"",key:o.tabsKey,tabs:a.tabs,active:o.activeTab,showSaveButton:!1,onChanged:t[1]||(t[1]=i=>o.activeTab=i)},null,8,["tabs","active"])),(n(!0),g(x,null,L(a.activeTabObject.actions,(i,N)=>(n(),_(b,{key:o.activeTab+N,name:i.label,align:""},{content:u(()=>[i.component?(n(),_(M(i.component),{key:0,onUpdate:$=>a.maybeDoAction(i,$),loading:o.doingAction[i.slug],disabled:a.isActionDisabled(i)},null,40,["onUpdate","loading","disabled"])):(n(),_(A,{type:"blue",size:"medium",onClick:$=>a.maybeDoAction(i),loading:o.doingAction[i.slug],key:o.doingActionKey,disabled:a.isActionDisabled(i)},{default:u(()=>[w(h(o.strings.buttonLabel),1)]),_:2},1032,["onClick","loading","disabled"])),c("div",{class:"aioseo-description",innerHTML:i.shortDescription},null,8,De),c("div",{class:"aioseo-description",innerHTML:i.longDescription},null,8,Ce),i.infoComponent?(n(),_(M(i.infoComponent),{key:2})):v("",!0)]),_:2},1032,["name"]))),128)),m(C,{show:o.showAreYouSureModal,"no-header":"",onClose:t[5]||(t[5]=i=>o.showAreYouSureModal=!1),classes:["aioseo-debug-modal"]},{body:u(()=>[c("div",Te,[c("button",{class:"close",onClick:t[3]||(t[3]=Z(i=>o.showAreYouSureModal=!1,["stop"]))},[m(D,{onClick:t[2]||(t[2]=i=>o.showAreYouSureModal=!1)})]),c("h3",null,h(a.areYouSureTitle),1),c("div",{class:"description",innerHTML:o.strings.cannotBeUndone},null,8,Me),m(A,{type:"blue",size:"medium",onClick:a.doAction},{default:u(()=>[w(h(o.strings.yesDoAction),1)]),_:1},8,["onClick"]),m(A,{type:"gray",size:"medium",onClick:t[4]||(t[4]=i=>o.showAreYouSureModal=!1)},{default:u(()=>[w(h(o.strings.noChangedMind),1)]),_:1})])]),_:1},8,["show"])]),_:1},8,["header-text"])])}const Le=k(we,[["render",xe]]),$e={setup(){return{addonsStore:R(),rootStore:S()}},components:{Debug:Le},computed:{extraActions(){const e=p('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions),t=this.addonsStore.addons.find(o=>o.sku==="aioseo-video-sitemap"),s=this.addonsStore.addons.find(o=>o.sku==="aioseo-link-assistant"),r=[];return t.isActive&&r.push({slug:"sitemap",actions:[{label:"Clear Video Data",slug:"clear-video-data",shortDescription:"This action removes all video data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:p("To speed up the video scan, go to %1$s and run the <code>aioseo_video_sitemap_scan</code> action.",e),showModal:!1}]}),s.isActive&&r.push({slug:"link-assistant",name:"Link Assistant",actions:[{label:"Clear Data",slug:"link-assistant-clear-data",shortDescription:"This action removes all Link Assistant data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:p("The various Link Assistant scans can be sped up through the %1$s",e),showModal:!0},{label:"Clear Links",slug:"link-assistant-clear-links",shortDescription:"This action removes all link data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:p("To speed up the links scan, go to %1$s and run the <code>aioseo_link_assistant_links_scan</code> action.",e),showModal:!0},{label:"Clear Suggestions",slug:"link-assistant-clear-suggestions",shortDescription:"This action removes all link suggestion data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:p("To speed up the links scan, go to %1$s and run the <code>aioseo_link_assistant_link_suggestions_scan</code> action.",e),showModal:!0},{label:"Undismiss Suggestions",slug:"link-assistant-undismiss-suggestions",shortDescription:"This action removes the dismissed state from all suggestions, which makes them appear in the UI again.",longDescription:p("To speed up the video scan, go to %1$s and run the <code>aioseo_video_sitemap_scan</code> action.",e),showModal:!1}]}),r}}};function Oe(e,t,s,r,o,a){const d=l("debug",!0);return n(),_(d,{extraActions:a.extraActions},null,8,["extraActions"])}const Be=k($e,[["render",Oe]]),O="all-in-one-seo-pack",Ne={setup(){return{rootStore:S()}},components:{BadBotBlocker:Y,CoreMain:H,DatabaseTools:z,Debug:Be,HtaccessEditor:ee,ImportExport:oe,RobotsEditor:te,SystemStatus:se,WpCode:ie},data(){return{strings:{pageName:this.rootStore.aioseo.data.isNetworkAdmin?T("Network Tools",O):T("Tools",O)}}},computed:{showSaveButton(){return this.$route.name!=="system-status"&&this.$route.name!=="import-export"&&this.$route.name!=="database-tools"&&this.$route.name!=="debug"&&this.$route.name!=="wp-code"}}};function Ve(e,t,s,r,o,a){const d=l("core-main");return n(),_(d,{"page-name":o.strings.pageName,"show-save-button":a.showSaveButton},{default:u(()=>[(n(),_(M(e.$route.name)))]),_:1},8,["page-name","show-save-button"])}const dt=k(Ne,[["render",Ve]]);export{dt as default};
