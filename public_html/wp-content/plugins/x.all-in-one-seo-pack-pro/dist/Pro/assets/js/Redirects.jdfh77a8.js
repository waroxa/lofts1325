import{R,C as T,L as C}from"./Redirects.mu81kkm3.js";import{n as S,c as x,e as U}from"./index.ms17x8jb.js";import{C as k}from"./Index.oj2oko5r.js";import{C as A}from"./Card.iorx4a6j.js";import{G as L}from"./constants.d8cemsm4.js";import{C as $}from"./Caret.mmz7e9vd.js";import"./translations.b896ab1m.js";import{_ as w}from"./_plugin-vue_export-helper.oebm7xum.js";import{a as B,_ as u}from"./default-i18n.hohxoesu.js";import{x as s,o as n,l,m as g,a as y,C as c,y as N,t as M,b as _,c as v,u as o}from"./runtime-dom.esm-bundler.h3wlw8jh.js";import{u as P}from"./AddonConditions.ly9dklbb.js";const f="aioseo-pro",q={setup(){return{redirectsStore:S(),rootStore:x()}},components:{CoreAlert:$},data(){return{strings:{nginxReload:B(u("Your redirect settings have been updated. In order for them to work properly you may need to reload your %1$s configuration. %2$s",f),this.detectedServer(),U.getDocLink(L.learnMore,"redirectServerConfigReload",!0)),dontKnow:u("If you don't know how to do that please revert your Redirect Method to PHP.",f),checkAgain:u("Check Again",f)}}},methods:{maybeTest(){this.redirectsStore.testServerRedirects()},detectedServer(){switch(this.rootStore.aioseo.data.server){case"apache":return"Apache";case"nginx":return"NGINX";case"litespeed":return"LiteSpeed";default:return""}}},mounted(){this.maybeTest(),window.aioseoBus.$on("changes-saved",this.maybeTest),window.aioseoBus.$on("added-redirect",this.maybeTest),window.aioseoBus.$on("redirect-updated",this.maybeTest)},beforeUnmount(){window.aioseoBus.$off("changes-saved",this.maybeTest),window.aioseoBus.$off("added-redirect",this.maybeTest),window.aioseoBus.$off("redirect-updated",this.maybeTest)}},H=["innerHTML"],I=["innerHTML"];function G(e,i,p,t,r,a){const d=s("base-button"),m=s("core-alert");return t.redirectsStore.server.redirectTest.failed&&t.redirectsStore.options.main.method==="server"?(n(),l(m,{key:0,size:"small",type:"yellow"},{default:g(()=>[y("div",{innerHTML:r.strings.nginxReload},null,8,H),y("div",{innerHTML:r.strings.dontKnow},null,8,I),c(d,{type:"blue",size:"small",onClick:i[0]||(i[0]=h=>t.redirectsStore.testServerRedirects()),loading:t.redirectsStore.server.redirectTest.testing},{default:g(()=>[N(M(r.strings.checkAgain),1)]),_:1},8,["loading"])]),_:1})):_("",!0)}const V=w(q,[["render",G],["__scopeId","data-v-af1db2ac"]]),z="aioseo-pro",O={setup(){return{redirectsStore:S()}},components:{CoreAddRedirection:k,CoreCard:A,ServerConfigReloadWarning:V,RedirectsTable:R},data(){return{queryUrls:[],targetUrl:"",type:0,strings:{addNewRedirection:u("Add New Redirection",z)}}},computed:{getType(){return this.type?this.type:-1},getTarget(){return this.targetUrl?this.targetUrl:this.queryUrls.length?"/":""},getUrls(){return this.redirectsStore.manualUrls.length?(this.redirectsStore.manualUrls.forEach(e=>{this.queryUrls.push({url:e.url,regex:e.regex||!1,ignoreSlash:e.slash||!1,ignoreCase:e.case||!1,errors:[],warnings:[]}),e.target&&(this.targetUrl=e.target),e.type&&(this.type=e.type)}),this.queryUrls):this.queryUrls}}},j={class:"aioseo-redirects"};function D(e,i,p,t,r,a){const d=s("server-config-reload-warning"),m=s("core-add-redirection"),h=s("core-card"),b=s("redirects-table");return n(),v("div",j,[c(d),c(h,{slug:"addNewRedirection","header-text":r.strings.addNewRedirection},{default:g(()=>[c(m,{urls:a.getUrls,target:a.getTarget,type:a.getType},null,8,["urls","target","type"])]),_:1},8,["header-text"]),c(b)])}const E=w(O,[["render",D]]),K={class:"aioseo-redirects-main"},W={__name:"Redirects",setup(e){const{shouldShowActivate:i,shouldShowLite:p,shouldShowMain:t,shouldShowUpdate:r}=P({addonSlug:"aioseo-redirects"});return(a,d)=>(n(),v("div",K,[o(t)?(n(),l(o(E),{key:0})):_("",!0),o(r)||o(i)?(n(),l(o(T),{key:1})):_("",!0),o(p)?(n(),l(o(C),{key:2})):_("",!0)]))}},ne=Object.freeze(Object.defineProperty({__proto__:null,default:W},Symbol.toStringTag,{value:"Module"}));export{ne as R,V as S,W as _};
