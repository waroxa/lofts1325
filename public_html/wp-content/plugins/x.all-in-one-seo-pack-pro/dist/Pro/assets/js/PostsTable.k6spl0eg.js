import{x as h,o as u,c as k,C as f,t as l,b as g,a,g as O,m as c,E as z,y as w,l as P}from"./runtime-dom.esm-bundler.h3wlw8jh.js";import{D,f as G,j as J,e as K,u as Q,c as X,g as Y}from"./index.ms17x8jb.js";import{u as $}from"./PostTypes.pd67gy5m.js";import{a as ee,S as te,c as se}from"./Statistic.mqjb3omt.js";import{u as oe}from"./WpTable.cpvmueu1.js";import{l as ie}from"./license.kld2zdxf.js";import{n as U}from"./numbers.busvl4mt.js";import{_ as ne}from"./ScoreButton.bd09tbvr.js";import{C as re}from"./Table.mfhtc2w7.js";import{C as ae}from"./Index.ezxlh32q.js";import{q as le}from"./Cta.joj5g5ru.js";import"./translations.b896ab1m.js";import{_ as L}from"./_plugin-vue_export-helper.oebm7xum.js";import{_ as r,a as E}from"./default-i18n.hohxoesu.js";import{_ as B}from"./IndexStatus.ekkbieez.js";import{a as ce}from"./addons.b4tcn9l3.js";import{S as de,a as pe,b as ue}from"./Affiliate.hm1ohzvq.js";import{S as he}from"./External.hqd7q0q0.js";import{S as fe}from"./Suggestion.c51vk5fc.js";const j="all-in-one-seo-pack",ge={components:{apexchart:le},props:{points:{type:Object,required:!0},peak:{type:Number,default(){return 0}},recovering:{type:Boolean,default(){return!1}},height:{type:Number,default(){return 50}}},data(){return{strings:{recovering:r("Slowly Recovering",j),peak:r("Peak",j)}}},computed:{getSeries(){const s=this.points,n=[];return Object.keys(s).forEach(o=>{n.push({x:o,y:s[o]})}),[{data:n}]},chartOptions(){const s=this.peak;return{colors:[function({value:n}){return n===s?"#005AE0":"#99C2FF"}],chart:{type:"bar",sparkline:{enabled:!0},zoom:{enabled:!1},toolbar:{show:!1},parentHeightOffset:0,background:"#fff"},grid:{show:!1,padding:{top:2,right:2,bottom:0,left:2}},plotOptions:{bar:{columnWidth:"85%",barHeight:"100%"}},fill:{type:"solid"},tooltip:{enabled:!0,x:{show:!0,formatter:n=>D.fromFormat(n,"yyyy-MM").setZone(D.zone).toLocaleString({month:"long",year:"numeric"})},y:{formatter:n=>{const o=E(r("%1$s points",j),U.numberFormat(n,0));let t="";return n===s&&(t=`<span class="peak">${this.strings.peak}</span>`),o+t}},marker:{show:!1}}}}}},me={class:"aioseo-graph-decay"},_e={key:0,class:"aioseo-graph-decay-recovering"};function Se(s,n,o,t,i,p){const m=h("apexchart");return u(),k("div",me,[f(m,{width:"100%",height:o.height,ref:"apexchart",options:p.chartOptions,series:p.getSeries,class:"aioseo-graph-decay-chart"},null,8,["height","options","series"]),o.recovering?(u(),k("div",_e,l(i.strings.recovering),1)):g("",!0)])}const be=L(ge,[["render",Se]]),ke="aioseo-pro",ye={components:{SvgLinkAffiliate:de,SvgLinkExternal:he,SvgLinkInternalInbound:pe,SvgLinkInternalOutbound:ue,SvgLinkSuggestion:fe},props:{row:Object},data(){return{addons:ce,strings:{links:r("Links:",ke)}}}},xe={key:0,class:"object-actions"},we={key:0,class:"link-assistant"},Pe={class:"title"},ve={class:"count"},Fe={class:"total"},Te={class:"count"},Ce={class:"total"},Re={class:"count"},Ie={class:"total"},Ae={class:"count"},je={class:"total"},Le={class:"count"},Oe={class:"total"};function De(s,n,o,t,i,p){const m=h("svg-link-internal-inbound"),S=h("svg-link-internal-outbound"),x=h("svg-link-external"),v=h("svg-link-affiliate"),_=h("svg-link-suggestion");return o.row.objectId?(u(),k("div",xe,[i.addons.isActive("aioseo-link-assistant")&&!i.addons.requiresUpgrade("aioseo-link-assistant")&&o.row.linkAssistant?(u(),k("div",we,[a("div",Pe,l(i.strings.links),1),a("div",ve,[f(m),a("span",Fe,l(o.row.linkAssistant.inboundInternal||0),1)]),a("div",Te,[f(S),a("span",Ce,l(o.row.linkAssistant.outboundInternal||0),1)]),a("div",Re,[f(x),a("span",Ie,l(o.row.linkAssistant.external||0),1)]),a("div",Ae,[f(v),a("span",je,l(o.row.linkAssistant.affiliate||0),1)]),a("div",Le,[f(_),a("span",Oe,l(o.row.linkAssistant.linkSuggestions||0),1)])])):g("",!0)])):g("",!0)}const Be=L(ye,[["render",De]]),d="all-in-one-seo-pack",Ue={setup(s){const{editPost:n,viewPost:o}=$(),t=G(),i=({name:T,selectedValue:Z})=>{S[T]=Z},p=()=>{S.value.postType="",i({name:"postType",selectedValue:""})},m=T=>{if(typeof t[s.updateAction]=="function")return t[s.updateAction](T)},S=O({}),x=O(!1),{openPostDetail:v,orderBy:_,orderDir:C,processFilter:I,resultsPerPage:A}=ee({processFilterTable:T=>V(T),showUpsell:x}),e="searchStatisticsSeoStatistics",b="aioseo-search-statistics-post-table",{filter:y,pageNumber:F,processAdditionalFilters:R,processChangeItemsPerPage:N,processFilterTable:V,processPagination:H,processSearch:q,processSort:M,searchTerm:W}=oe({changeItemsPerPageSlug:e,fetchData:m,orderBy:_,orderDir:C,resetSelectedFilters:p,resultsPerPage:A,selectedFilters:S,tableId:b});return{changeItemsPerPageSlug:e,editPost:n,filter:y,licenseStore:J(),links:K,openPostDetail:v,optionsStore:Q(),orderBy:_,orderDir:C,pageNumber:F,processAdditionalFilterOptionSelected:i,processAdditionalFilters:R,processChangeItemsPerPage:N,processFilter:I,processPagination:H,processSearch:q,processSort:M,rootStore:X(),searchStatisticsStore:t,searchTerm:W,selectedFilters:S,settingsStore:Y(),showUpsell:x,tableId:b,viewPost:o}},components:{CoreScoreButton:ne,CoreWpTable:re,Cta:ae,GraphDecay:be,IndexStatus:B,IndexStatusPro:B,ObjectActions:Be,Statistic:te},props:{posts:Object,isLoading:Boolean,showHeader:{type:Boolean,default(){return!0}},showTableFooter:Boolean,showItemsPerPage:Boolean,columns:{type:Array,default(){return["postTitle","seoScore","clicks","impressions","position"]}},appendColumns:{type:Object,default(){return{}}},defaultSorting:{type:Object,default(){return{}}},initialFilter:{type:String,default(){return""}},updateAction:{type:String,default(){return"updateSeoStatistics"}}},data(){return{numbers:U,sortableColumns:[],strings:{position:r("Position",d),ctaButtonText:r("Unlock Post Tracking",d),ctaHeader:E(r("Post Tracking is a %1$s Feature",d),"PRO")},license:ie}},watch:{isLoading(s){s||this.$nextTick(()=>{this.loadInspectionResult()})}},computed:{getFilters(){return this.searchStatisticsStore.shouldShowSampleReports?[]:this.posts.filters},allColumns(){var o,t;const s=se(this.columns),n=((t=(o=this.posts)==null?void 0:o.filters)==null?void 0:t.find(i=>i.active))||{};return this.appendColumns[n.slug||"all"]&&s.push(this.appendColumns[n.slug||"all"]),s.map(i=>(i.endsWith("Sortable")&&(i=i.replace("Sortable",""),this.sortableColumns.push(i)),i))},tableColumns(){return[{slug:"row",label:"#",width:"40px"},{slug:"postTitle",label:r("Title",d),width:"100%"},{slug:"seoScore",label:r("TruSEO Score",d),width:"130px"},{slug:"indexStatus",label:r("Indexed",d),width:"80px",coreFeature:"index-status"},{slug:"clicks",label:r("Clicks",d),width:"80px"},{slug:"impressions",label:r("Impressions",d),width:"110px"},{slug:"position",label:r("Position",d),width:"90px"},{slug:"lastUpdated",label:r("Last Updated On",d),width:"160px"},{slug:"decay",label:r("Loss",d),width:"140px"},{slug:"decayPercent",label:r("Drop (%)",d),width:"120px"},{slug:"performance",label:r("Performance Score",d),width:"150px"},{slug:"diffDecay",label:r("Diff",d),width:"95px"},{slug:"diffPosition",label:r("Diff",d),width:"80px"}].filter(s=>s.coreFeature&&((!this.rootStore.isPro||this.licenseStore.isUnlicensed)&&!this.searchStatisticsStore.shouldShowSampleReports||!this.license.hasCoreFeature("search-statistics",s.coreFeature)&&!this.searchStatisticsStore.shouldShowSampleReports)?!1:s.slug==="seoScore"?this.optionsStore.options.advanced.truSeo:this.allColumns.includes(s.slug)).map(s=>(s.sortable=this.isSortable&&this.sortableColumns.includes(s.slug),s.sortable&&(s.sortDir=s.slug===this.orderBy?this.orderDir:"asc",s.sorted=s.slug===this.orderBy),s))},isSortable(){return this.filter==="all"&&this.rootStore.isPro&&!this.licenseStore.isUnlicensed}},methods:{loadInspectionResult(){var o;if(!((o=this.posts)!=null&&o.rows)||this.searchStatisticsStore.quotaExceeded.urlInspection)return;const s=Object.values(this.posts.rows),n=s.filter(t=>{var i;return!t.inspectionResult||((i=t.inspectionResult)==null?void 0:i.length)===0});n.length&&(n.forEach(t=>{const i=s.find(p=>p.page===t.page);i&&(i.inspectionResultLoading=!0)}),this.searchStatisticsStore.getInspectionResult(n.map(t=>t.page)).then(t=>{n.forEach(i=>{const p=s.find(m=>m.page===i.page);p&&(p.inspectionResult=t[i.page],p.inspectionResultLoading=!1)})}))}},mounted(){var s,n;this.initialFilter&&this.processFilter({slug:this.initialFilter}),this.loadInspectionResult(),this.orderBy=((s=this.defaultSorting)==null?void 0:s.orderBy)||this.orderBy,this.orderDir=((n=this.defaultSorting)==null?void 0:n.orderDir)||this.orderDir}},Ee={class:"aioseo-search-statistics-post-table"},Ne={class:"object-row"},Ve={class:"object-title"},He=["onClick"],qe={key:1,class:"object-title"},Me={key:0,class:"row-actions"},We=["href"],Ze=["href"];function ze(s,n,o,t,i,p){const m=h("object-actions"),S=h("core-score-button"),x=h("index-status"),v=h("index-status-pro"),_=h("statistic"),C=h("graph-decay"),I=h("cta"),A=h("core-wp-table");return u(),k("div",Ee,[f(A,{ref:"table",class:"posts-table",id:t.tableId,columns:p.tableColumns,rows:Object.values(o.posts.rows),totals:o.posts.totals,filters:p.getFilters,"additional-filters":o.posts.additionalFilters,"selected-filters":t.selectedFilters,loading:o.isLoading,"initial-page-number":t.pageNumber,"initial-search-term":t.searchTerm,"initial-items-per-page":t.settingsStore.settings.tablePagination[t.changeItemsPerPageSlug],"show-header":o.showHeader,"show-bulk-actions":!1,"show-table-footer":o.showTableFooter,"show-items-per-page":o.showItemsPerPage&&!t.searchStatisticsStore.shouldShowSampleReports,"show-pagination":"","blur-rows":t.showUpsell,onFilterTable:t.processFilter,onProcessAdditionalFilters:t.processAdditionalFilters,onAdditionalFilterOptionSelected:t.processAdditionalFilterOptionSelected,onPaginate:t.processPagination,onProcessChangeItemsPerPage:t.processChangeItemsPerPage,onSearch:t.processSearch,onSortColumn:t.processSort},{row:c(({index:e})=>[a("div",Ne,l(e+1),1)]),postTitle:c(({row:e})=>{var b,y;return[a("div",Ve,[e.objectId&&e.objectType==="post"&&t.searchStatisticsStore.isConnected?(u(),k("a",{key:0,href:"#",onClick:z(F=>t.openPostDetail(e),["prevent"])},l(e.objectTitle),9,He)):(u(),k("span",qe,l(e.objectTitle),1))]),f(m,{row:e},null,8,["row"]),e.objectId&&e.objectType==="post"?(u(),k("div",Me,[a("span",null,[a("a",{class:"view",href:e.context.permalink,target:"_blank"},[a("span",null,l(t.viewPost((b=e.context.postType)==null?void 0:b.singular)),1)],8,We),w(" | ")]),a("span",null,[a("a",{class:"edit",href:e.context.editLink,target:"_blank"},[a("span",null,l(t.editPost((y=e.context.postType)==null?void 0:y.singular)),1)],8,Ze)])])):g("",!0)]}),seoScore:c(({row:e})=>[e.seoScore?(u(),P(S,{key:0,class:"table-score-button",score:e.seoScore},null,8,["score"])):g("",!0)]),indexStatus:c(({row:e})=>{var b,y,F,R;return[t.searchStatisticsStore.shouldShowSampleReports?g("",!0):(u(),P(x,{key:0,result:(b=e.inspectionResult)==null?void 0:b.indexStatusResult,"result-link":(y=e.inspectionResult)==null?void 0:y.inspectionResultLink,loading:e.inspectionResultLoading},null,8,["result","result-link","loading"])),t.searchStatisticsStore.shouldShowSampleReports?(u(),P(v,{key:1,result:(F=e.inspectionResult)==null?void 0:F.indexStatusResult,"result-link":(R=e.inspectionResult)==null?void 0:R.inspectionResultLink,loading:e.inspectionResultLoading},null,8,["result","result-link","loading"])):g("",!0)]}),clicks:c(({row:e})=>[w(l(i.numbers.compactNumber(e.clicks)),1)]),impressions:c(({row:e})=>[w(l(i.numbers.compactNumber(e.impressions)),1)]),position:c(({row:e})=>[w(l(Math.round(e.position).toFixed(0)),1)]),lastUpdated:c(({row:e})=>[w(l(e.context.lastUpdated||"-"),1)]),decay:c(({row:e})=>[f(_,{type:"decay","show-difference":!1,total:e.decay,showZeroValues:!0,class:"no-margin"},null,8,["total"])]),decayPercent:c(({row:e})=>[f(_,{type:"decayPercent","show-difference":!1,total:e.decayPercent,showZeroValues:!0,class:"no-margin"},null,8,["total"])]),performance:c(({row:e})=>[f(C,{points:e.points,peak:e.peak,recovering:e.recovering,height:38},null,8,["points","peak","recovering"])]),diffPosition:c(({row:e})=>[e.difference.comparison?(u(),P(_,{key:0,type:"position","show-original":!1,difference:e.difference.position,"tooltip-offset":"-100px,0"},null,8,["difference"])):g("",!0)]),diffDecay:c(({row:e})=>[e.difference.comparison?(u(),P(_,{key:0,type:"diffDecay","show-original":!1,difference:e.difference.decay,"tooltip-offset":"-100px,0"},null,8,["difference"])):g("",!0)]),cta:c(()=>[t.showUpsell?(u(),P(I,{key:0,"cta-link":t.links.getPricingUrl("search-statistics","search-statistics-upsell"),"button-text":i.strings.ctaButtonText,"learn-more-link":t.links.getUpsellUrl("search-statistics","search-statistics-upsell",t.rootStore.isPro?"pricing":"liteUpgrade"),"hide-bonus":!t.licenseStore.isUnlicensed},{"header-text":c(()=>[w(l(i.strings.ctaHeader),1)]),_:1},8,["cta-link","button-text","learn-more-link","hide-bonus"])):g("",!0)]),_:1},8,["id","columns","rows","totals","filters","additional-filters","selected-filters","loading","initial-page-number","initial-search-term","initial-items-per-page","show-header","show-table-footer","show-items-per-page","blur-rows","onFilterTable","onProcessAdditionalFilters","onAdditionalFilterOptionSelected","onPaginate","onProcessChangeItemsPerPage","onSearch","onSortColumn"])])}const ut=L(Ue,[["render",ze]]);export{ut as P};
